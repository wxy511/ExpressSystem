{
    "sourceFile": "src/utils/request.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 41,
            "patches": [
                {
                    "date": 1637575163886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1637575757798,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,12 @@\n     }\r\n \r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      console.log(\"-->\", config)\r\n+      console.log(\"-->1\", config)\r\n+      // if(config.url === ''){\r\n+      //   config.headers[] = code_aes(config.url)\r\n+      // }\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n@@ -98,11 +101,11 @@\n   response => {\r\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n-      // res = decode_aes(response.data)   ////111\r\n+      res = decode_aes(response.data) ////111\r\n     }\r\n-    // console.log(res)     ///111\r\n+    console.log(\"-->2\", res) ///111\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n       //   type: 'error',\r\n"
                },
                {
                    "date": 1637575816814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,12 +100,13 @@\n    */\r\n   response => {\r\n     // eslint-disable-next-line\r\n     let res = response.data\r\n+    console.log(\"-->2\", res)\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n-      res = decode_aes(response.data) ////111\r\n+      //res = decode_aes(response.data) ////111\r\n     }\r\n-    console.log(\"-->2\", res) ///111\r\n+    // console.log(\"-->2\", res) ///111\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n       //   type: 'error',\r\n"
                },
                {
                    "date": 1637576375182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,11 +63,11 @@\n \r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n       console.log(\"-->1\", config)\r\n-      // if(config.url === ''){\r\n-      //   config.headers[] = code_aes(config.url)\r\n-      // }\r\n+      if (config.url === '/api/s_login/') {\r\n+        config.headers['a1e4b985256628d684ef1e370a8f4238'] = code_aes(config.url)\r\n+      }\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n"
                },
                {
                    "date": 1637576578172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,11 +63,11 @@\n \r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n       console.log(\"-->1\", config)\r\n-      if (config.url === '/api/s_login/') {\r\n-        config.headers['a1e4b985256628d684ef1e370a8f4238'] = code_aes(config.url)\r\n-      }\r\n+      // if (config.url === '/api/s_login/') {\r\n+      //   config.headers[''] = code_aes(config.url)\r\n+      // }\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n"
                },
                {
                    "date": 1637577246004,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,8 @@\n    */\r\n   response => {\r\n     // eslint-disable-next-line\r\n     let res = response.data\r\n-    console.log(\"-->2\", res)\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n     // console.log(\"-->2\", res) ///111\r\n"
                },
                {
                    "date": 1637590733485,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,9 @@\n \r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n       console.log(\"-->1\", config)\r\n-      // if (config.url === '/api/s_login/') {\r\n+      // if (config.url === '/express/api/') {\r\n       //   config.headers[''] = code_aes(config.url)\r\n       // }\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n"
                },
                {
                    "date": 1637591476091,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,8 +101,9 @@\n   response => {\r\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n+      console.log(\"a\", response)\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n     // console.log(\"-->2\", res) ///111\r\n     if (res.error !== 0) {\r\n"
                },
                {
                    "date": 1637591490132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,9 @@\n   response => {\r\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n-      console.log(\"a\", response)\r\n+      console.log(\"a\", res)\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n     // console.log(\"-->2\", res) ///111\r\n     if (res.error !== 0) {\r\n"
                },
                {
                    "date": 1637591502912,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,8 +102,9 @@\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       console.log(\"a\", res)\r\n+      console.log(\"a1\", rresponsees)\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n     // console.log(\"-->2\", res) ///111\r\n     if (res.error !== 0) {\r\n"
                },
                {
                    "date": 1637591510864,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,11 +100,11 @@\n    */\r\n   response => {\r\n     // eslint-disable-next-line\r\n     let res = response.data\r\n-    if (response.config.method === 'post' || response.config.method === 'POST') {\r\n+    if (.conresponsefig.method === 'post' || response.config.method === 'POST') {\r\n       console.log(\"a\", res)\r\n-      console.log(\"a1\", rresponsees)\r\n+      console.log(\"a1\", response)\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n     // console.log(\"-->2\", res) ///111\r\n     if (res.error !== 0) {\r\n"
                },
                {
                    "date": 1637591520689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,9 @@\n    */\r\n   response => {\r\n     // eslint-disable-next-line\r\n     let res = response.data\r\n-    if (.conresponsefig.method === 'post' || response.config.method === 'POST') {\r\n+    if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       console.log(\"a\", res)\r\n       console.log(\"a1\", response)\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n"
                },
                {
                    "date": 1637591572433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,10 +101,8 @@\n   response => {\r\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n-      console.log(\"a\", res)\r\n-      console.log(\"a1\", response)\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n     // console.log(\"-->2\", res) ///111\r\n     if (res.error !== 0) {\r\n"
                },
                {
                    "date": 1637592425110,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,9 +72,9 @@\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n         config.data = JSON.stringify(config.data)\r\n       }\r\n-      // console.log(config.data)\r\n+      console.log(\"1\", config.data)\r\n       // config.data = code_aes(config.data)\r\n       // config.url = config.url + getSign(config.data || {})\r\n     }\r\n     return config\r\n"
                },
                {
                    "date": 1637593189436,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,9 @@\n     return config\r\n   },\r\n   error => {\r\n     // do something with request error\r\n-    console.log(error, 'request') // for debug\r\n+    console.log(\"qq\", error, 'request') // for debug\r\n     return Promise.reject(error)\r\n   }\r\n )\r\n \r\n"
                },
                {
                    "date": 1637593273663,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,10 @@\n     return config\r\n   },\r\n   error => {\r\n     // do something with request error\r\n-    console.log(\"qq\", error, 'request') // for debug\r\n+    console.log(error, 'request') // for debug\r\n+    console.log(\"qq\")\r\n     return Promise.reject(error)\r\n   }\r\n )\r\n \r\n"
                },
                {
                    "date": 1637593361744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,10 +81,11 @@\n   },\r\n   error => {\r\n     // do something with request error\r\n     console.log(error, 'request') // for debug\r\n-    console.log(\"qq\")\r\n+\r\n     return Promise.reject(error)\r\n+    console.log(error)\r\n   }\r\n )\r\n \r\n // response interceptor\r\n"
                },
                {
                    "date": 1637593396576,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,11 +81,11 @@\n   },\r\n   error => {\r\n     // do something with request error\r\n     console.log(error, 'request') // for debug\r\n+    console.log(error)\r\n+    return Promise.reject(error)\r\n \r\n-    return Promise.reject(error)\r\n-    console.log(error)\r\n   }\r\n )\r\n \r\n // response interceptor\r\n"
                },
                {
                    "date": 1637593438351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,8 @@\n   },\r\n   error => {\r\n     // do something with request error\r\n     console.log(error, 'request') // for debug\r\n-    console.log(error)\r\n     return Promise.reject(error)\r\n \r\n   }\r\n )\r\n"
                },
                {
                    "date": 1637634823819,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n-    // console.log(\"-->2\", res) ///111\r\n+    // console.log(\"-->111\", res) ///111\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n       //   type: 'error',\r\n"
                },
                {
                    "date": 1637813122501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,8 +62,9 @@\n     }\r\n \r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n+      console.log(config.data)\r\n       console.log(\"-->1\", config)\r\n       // if (config.url === '/express/api/') {\r\n       //   config.headers[''] = code_aes(config.url)\r\n       // }\r\n"
                },
                {
                    "date": 1637813156699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n     }\r\n \r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      console.log(config.data)\r\n+      console.log(\"123\", config.data)\r\n       console.log(\"-->1\", config)\r\n       // if (config.url === '/express/api/') {\r\n       //   config.headers[''] = code_aes(config.url)\r\n       // }\r\n"
                },
                {
                    "date": 1637813246487,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,20 +62,15 @@\n     }\r\n \r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      console.log(\"123\", config.data)\r\n-      console.log(\"-->1\", config)\r\n-      // if (config.url === '/express/api/') {\r\n-      //   config.headers[''] = code_aes(config.url)\r\n-      // }\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n         config.data = JSON.stringify(config.data)\r\n+        console.log(\"a\", config.data)\r\n       }\r\n-      console.log(\"1\", config.data)\r\n       // config.data = code_aes(config.data)\r\n       // config.url = config.url + getSign(config.data || {})\r\n     }\r\n     return config\r\n"
                },
                {
                    "date": 1637813545052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,22 +54,20 @@\n       // ['X-Token'] is a custom headers key\r\n       // please modify it according to the actual situation\r\n       config.headers['_V494344'] = getToken()\r\n     }\r\n-\r\n     if (!aes_key) {\r\n       // eslint-disable-next-line\r\n       aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n     }\r\n-\r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n+      console.log(\"config是\", config)\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n         config.data = JSON.stringify(config.data)\r\n-        console.log(\"a\", config.data)\r\n       }\r\n       // config.data = code_aes(config.data)\r\n       // config.url = config.url + getSign(config.data || {})\r\n     }\r\n"
                },
                {
                    "date": 1637813821918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,9 +60,9 @@\n       aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n     }\r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      console.log(\"config是\", config)\r\n+      // console.log(\"config是\", config)\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n"
                },
                {
                    "date": 1637819589808,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,9 +60,9 @@\n       aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n     }\r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      // console.log(\"config是\", config)\r\n+      console.log(\"config是\", config)\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n"
                },
                {
                    "date": 1637820846201,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,9 +98,8 @@\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n     }\r\n-    // console.log(\"-->111\", res) ///111\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n       //   type: 'error',\r\n"
                },
                {
                    "date": 1637821483800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,8 +97,9 @@\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n+      console.log(\"aaa\", response)\r\n     }\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n"
                },
                {
                    "date": 1637821996591,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,9 +97,9 @@\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n-      console.log(\"aaa\", response)\r\n+      console.log(\"服务器response是\", response)\r\n     }\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n"
                },
                {
                    "date": 1637831093901,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,9 +60,9 @@\n       aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n     }\r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      console.log(\"config是\", config)\r\n+      // console.log(\"config是\", config)\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n@@ -97,9 +97,9 @@\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n-      console.log(\"服务器response是\", response)\r\n+      // console.log(\"服务器response是\", response)\r\n     }\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n"
                },
                {
                    "date": 1637893232391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n import i18n from '@/languages'\r\n \r\n let messageInstance = null\r\n const resetMessage = (options) => {\r\n-  if (messageInstance) {\r\n+  if (messageInstance.length >= 0) {\r\n     messageInstance.close()\r\n   }\r\n   messageInstance = Message(options)\r\n };\r\n"
                },
                {
                    "date": 1637893337299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,9 @@\n import i18n from '@/languages'\r\n \r\n let messageInstance = null\r\n const resetMessage = (options) => {\r\n+  //add 改动了length\r\n   if (messageInstance.length >= 0) {\r\n     messageInstance.close()\r\n   }\r\n   messageInstance = Message(options)\r\n"
                },
                {
                    "date": 1637900477151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n \r\n let messageInstance = null\r\n const resetMessage = (options) => {\r\n   //add 改动了length\r\n-  if (messageInstance.length >= 0) {\r\n+  if (messageInstance) {\r\n     messageInstance.close()\r\n   }\r\n   messageInstance = Message(options)\r\n };\r\n"
                },
                {
                    "date": 1637900589098,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n       aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n     }\r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      // console.log(\"config是\", config)\r\n+      console.log(\"config是\", config)\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n"
                },
                {
                    "date": 1637900722111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,9 +98,9 @@\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n-      // console.log(\"服务器response是\", response)\r\n+      console.log(\"服务器response是\", response)\r\n     }\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n"
                },
                {
                    "date": 1637900921870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n \r\n let messageInstance = null\r\n const resetMessage = (options) => {\r\n   //add 改动了length\r\n-  if (messageInstance) {\r\n+  if (messageInstance.length >= 0) {\r\n     messageInstance.close()\r\n   }\r\n   messageInstance = Message(options)\r\n };\r\n"
                },
                {
                    "date": 1637901643440,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n       aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n     }\r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      console.log(\"config是\", config)\r\n+      // console.log(\"config是\", config)\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n@@ -98,9 +98,9 @@\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n-      console.log(\"服务器response是\", response)\r\n+      //console.log(\"服务器response是\", response)\r\n     }\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n"
                },
                {
                    "date": 1638158312875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n \r\n let messageInstance = null\r\n const resetMessage = (options) => {\r\n   //add 改动了length\r\n-  if (messageInstance.length >= 0) {\r\n+  if (messageInstance.length) {\r\n     messageInstance.close()\r\n   }\r\n   messageInstance = Message(options)\r\n };\r\n"
                },
                {
                    "date": 1638158428050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n \r\n let messageInstance = null\r\n const resetMessage = (options) => {\r\n   //add 改动了length\r\n-  if (messageInstance.length) {\r\n+  if (messageInstance) {\r\n     messageInstance.close()\r\n   }\r\n   messageInstance = Message(options)\r\n };\r\n"
                },
                {
                    "date": 1638158608962,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,8 @@\n import i18n from '@/languages'\r\n \r\n let messageInstance = null\r\n const resetMessage = (options) => {\r\n-  //add 改动了length\r\n   if (messageInstance) {\r\n     messageInstance.close()\r\n   }\r\n   messageInstance = Message(options)\r\n"
                },
                {
                    "date": 1638159132590,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,9 +60,9 @@\n       aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n     }\r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      // console.log(\"config是\", config)\r\n+      console.log(\"config是\", config)\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n@@ -97,9 +97,9 @@\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n-      //console.log(\"服务器response是\", response)\r\n+      console.log(\"服务器response是\", response)\r\n     }\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n"
                },
                {
                    "date": 1638162079388,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,9 +60,9 @@\n       aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n     }\r\n     config.method = config.method.toUpperCase()\r\n     if (config.method === 'POST') {\r\n-      console.log(\"config是\", config)\r\n+      // console.log(\"config是\", config)\r\n       if (typeof (config.data) === 'undefined') {\r\n         config.data = ''\r\n         config.data = JSON.stringify({})\r\n       } else if (typeof (config.data) === 'object') {\r\n@@ -97,9 +97,9 @@\n     // eslint-disable-next-line\r\n     let res = response.data\r\n     if (response.config.method === 'post' || response.config.method === 'POST') {\r\n       //res = decode_aes(response.data) ////111\r\n-      console.log(\"服务器response是\", response)\r\n+      // console.log(\"服务器response是\", response)\r\n     }\r\n     if (res.error !== 0) {\r\n       // Message({\r\n       //   message: res.message || 'Error',\r\n"
                }
            ],
            "date": 1637575163886,
            "name": "Commit-0",
            "content": "/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: Bing\r\n * @Date: 2020-10-21 09:13:29\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2021-11-22 16:46:47\r\n */\r\nimport axios from 'axios'\r\nimport {\r\n  MessageBox,\r\n  Message\r\n} from 'element-ui'\r\nimport store from '@/store'\r\nimport {\r\n  getToken\r\n} from '@/utils/auth'\r\nimport i18n from '@/languages'\r\n\r\nlet messageInstance = null\r\nconst resetMessage = (options) => {\r\n  if (messageInstance) {\r\n    messageInstance.close()\r\n  }\r\n  messageInstance = Message(options)\r\n};\r\n['error', 'success', 'info', 'warning'].forEach(type => {\r\n  resetMessage[type] = options => {\r\n    if (typeof options === 'string') {\r\n      options = {\r\n        message: options\r\n      }\r\n    }\r\n    options.type = type\r\n    return resetMessage(options)\r\n  }\r\n})\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_API, // '/api',  // url = base url + request url\r\n  // withCredentials: true, // send cookies when cross-domain requests\r\n  timeout: 5000 // request timeout\r\n})\r\n\r\nvar aes_key = null\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n\r\n  config => {\r\n    // do something before request is sent\r\n    if (store.getters.token) {\r\n      // let each request carry token\r\n      // ['X-Token'] is a custom headers key\r\n      // please modify it according to the actual situation\r\n      config.headers['_V494344'] = getToken()\r\n    }\r\n\r\n    if (!aes_key) {\r\n      // eslint-disable-next-line\r\n      aes_key = process.env.NODE_ENV === 'development' ? CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) : CryptoJS.enc.Utf8.parse(ACCESS_TOKEN)\r\n    }\r\n\r\n    config.method = config.method.toUpperCase()\r\n    if (config.method === 'POST') {\r\n      console.log(\"-->\", config)\r\n      if (typeof (config.data) === 'undefined') {\r\n        config.data = ''\r\n        config.data = JSON.stringify({})\r\n      } else if (typeof (config.data) === 'object') {\r\n        config.data = JSON.stringify(config.data)\r\n      }\r\n      // console.log(config.data)\r\n      // config.data = code_aes(config.data)\r\n      // config.url = config.url + getSign(config.data || {})\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    // do something with request error\r\n    console.log(error, 'request') // for debug\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  /**\r\n   * If you want to get http information such as headers or status\r\n   * Please return  response => response\r\n   */\r\n\r\n  /**\r\n   * Determine the request status by custom code\r\n   * Here is just an example\r\n   * You can also judge the status by HTTP Status Code\r\n   */\r\n  response => {\r\n    // eslint-disable-next-line\r\n    let res = response.data\r\n    if (response.config.method === 'post' || response.config.method === 'POST') {\r\n      // res = decode_aes(response.data)   ////111\r\n    }\r\n    // console.log(res)     ///111\r\n    if (res.error !== 0) {\r\n      // Message({\r\n      //   message: res.message || 'Error',\r\n      //   type: 'error',\r\n      //   duration: 5 * 1000\r\n      // })\r\n      // console.log(res.error, 'response')\r\n      switch (res.error) {\r\n        case 500: {\r\n          MessageBox.confirm('You have been logged out, you can cancel to stay on this page, or log in again', 'Confirm logout', {\r\n            confirmButtonText: 'Re-Login',\r\n            cancelButtonText: 'Cancel',\r\n            type: 'warning'\r\n          }).then(() => {\r\n            store.dispatch('user/resetToken').then(() => {\r\n              location.reload()\r\n            })\r\n          })\r\n          break\r\n        }\r\n        case 2: {\r\n          resetMessage({\r\n            message: i18n.t('Error.FailedConnectSQL'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 3: {\r\n          resetMessage({\r\n            message: i18n.t('Error.FailedOperateSQL'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 5: {\r\n          resetMessage({\r\n            message: i18n.t('Error.VisitorBlack'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 6: {\r\n          resetMessage({\r\n            message: i18n.t('Error.HostBlack'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 7: {\r\n          resetMessage({\r\n            message: i18n.t('Error.NoRecord'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 10: {\r\n          resetMessage({\r\n            message: i18n.t('Error.ErrorDataFormat'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 13: {\r\n          resetMessage({\r\n            message: i18n.t('Error.AlreadyExists'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 18: {\r\n          resetMessage({\r\n            message: i18n.t('Error.VisitorNoSignin'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 30: {\r\n          resetMessage({\r\n            message: i18n.t('Error.InvalidData'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        case 39: {\r\n          resetMessage({\r\n            message: i18n.t('Error.AlreadyExistsDefault'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          break\r\n        }\r\n        // 20210305 增加密码错误次数过多\r\n        case 140: {\r\n          resetMessage({\r\n            message: i18n.t('Error.InputPswTooMany'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          // store.dispatch('user/resetToken').then(() => {\r\n          //   location.reload()\r\n          // })\r\n          break\r\n        }\r\n        // 20210304 增加python踢出类型\r\n        case 1099: {\r\n          resetMessage({\r\n            message: i18n.t('Error.InvalidData'),\r\n            type: 'error',\r\n            center: true,\r\n            duration: 5 * 1000\r\n          })\r\n          // store.dispatch('user/resetToken').then(() => {\r\n          //   location.reload()\r\n          // })\r\n          break\r\n        }\r\n\r\n        default: {\r\n          return res\r\n        }\r\n      }\r\n    } else {\r\n      return res\r\n    }\r\n  },\r\n  error => {\r\n    console.log('err1  ' + error) // for debug\r\n    resetMessage({\r\n      message: error.message,\r\n      center: true,\r\n      type: 'error'\r\n    })\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n// const CryptoJS = require('crypto-js')\r\n/* eslint-disable */\r\nfunction getSign(data) {\r\n  if (process.env.NODE_ENV === 'development') {\r\n    var aes_key = CryptoJS.enc.Utf8.parse(process.env.VUE_APP_AES_KEY) // ACCESS_TOKEN +fvyy-c0n*2j_$_9\r\n  } else {\r\n    var aes_key = CryptoJS.enc.Utf8.parse(ACCESS_TOKEN) // ACCESS_TOKEN\r\n  }\r\n  var timestamp = new Date().getTime()\r\n  var bodydata = data + '.' + String(timestamp)\r\n  bodydata = CryptoJS.enc.Utf8.parse(bodydata)\r\n  var encrypted = CryptoJS.AES.encrypt(bodydata, aes_key, {\r\n    mode: CryptoJS.mode.ECB,\r\n    padding: CryptoJS.pad.Pkcs7\r\n  }).ciphertext.toString()\r\n  // console.log(ACCESS_TOKEN)\r\n  var sha256 = CryptoJS.SHA256(encrypted).toString()\r\n  return '?timestamp=' + String(timestamp) + '&sign=' + sha256.toLowerCase()\r\n}\r\n\r\nfunction code_aes(data) {\r\n  return CryptoJS.AES.encrypt(data, aes_key, {\r\n    mode: CryptoJS.mode.ECB,\r\n    padding: CryptoJS.pad.Pkcs7\r\n  }).ciphertext.toString()\r\n}\r\n\r\nfunction decode_aes(data) {\r\n  let encryptedHexStr = CryptoJS.enc.Hex.parse(data);\r\n  let srcs = CryptoJS.enc.Base64.stringify(encryptedHexStr);\r\n  var decodedata = CryptoJS.AES.decrypt(srcs, aes_key, {\r\n    mode: CryptoJS.mode.ECB,\r\n    padding: CryptoJS.pad.Pkcs7\r\n  })\r\n  decodedata = decodedata.toString(CryptoJS.enc.Utf8)\r\n\r\n  return JSON.parse(decodedata)\r\n}\r\n\r\nexport default service\r\n"
        }
    ]
}