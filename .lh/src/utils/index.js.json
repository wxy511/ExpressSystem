{
    "sourceFile": "src/utils/index.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1638163498809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1638163580985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -178,9 +178,9 @@\n   return currentdate\r\n }\r\n //add\r\n /**\r\n- * 获取当天时间 精确到miao\r\n+ * 获取当天时间 精确到秒\r\n  * @returns \r\n  */\r\n export function getNowFormatDateMiao() {\r\n   const date = new Date()\r\n"
                }
            ],
            "date": 1638163498809,
            "name": "Commit-0",
            "content": "/**\r\n * Created by PanJiaChen on 16/11/18.\r\n */\r\nimport store from '@/store'\r\n/**\r\n * Parse the time to string\r\n * @param {(Object|string|number)} time\r\n * @param {string} cFormat\r\n * @returns {string | null}\r\n */\r\nexport function parseTime(time, cFormat) {\r\n  if (arguments.length === 0 || !time) {\r\n    return null\r\n  }\r\n  const format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}'\r\n  let date\r\n  if (typeof time === 'object') {\r\n    date = time\r\n  } else {\r\n    if ((typeof time === 'string')) {\r\n      if ((/^[0-9]+$/.test(time))) {\r\n        // support \"1548221490638\"\r\n        time = parseInt(time)\r\n      } else {\r\n        // support safari\r\n        // https://stackoverflow.com/questions/4310953/invalid-date-in-safari\r\n        time = time.replace(new RegExp(/-/gm), '/')\r\n      }\r\n    }\r\n\r\n    if ((typeof time === 'number') && (time.toString().length === 10)) {\r\n      time = time * 1000\r\n    }\r\n    date = new Date(time)\r\n  }\r\n  const formatObj = {\r\n    y: date.getFullYear(),\r\n    m: date.getMonth() + 1,\r\n    d: date.getDate(),\r\n    h: date.getHours(),\r\n    i: date.getMinutes(),\r\n    s: date.getSeconds(),\r\n    a: date.getDay()\r\n  }\r\n  const time_str = format.replace(/{([ymdhisa])+}/g, (result, key) => {\r\n    const value = formatObj[key]\r\n    // Note: getDay() returns 0 on Sunday\r\n    if (key === 'a') {\r\n      return ['日', '一', '二', '三', '四', '五', '六'][value]\r\n    }\r\n    return value.toString().padStart(2, '0')\r\n  })\r\n  return time_str\r\n}\r\n\r\n/**\r\n * @param {number} time\r\n * @param {string} option\r\n * @returns {string}\r\n */\r\nexport function formatTime(time, option) {\r\n  if (('' + time).length === 10) {\r\n    time = parseInt(time) * 1000\r\n  } else {\r\n    time = +time\r\n  }\r\n  const d = new Date(time)\r\n  const now = Date.now()\r\n\r\n  const diff = (now - d) / 1000\r\n\r\n  if (diff < 30) {\r\n    return '刚刚'\r\n  } else if (diff < 3600) {\r\n    // less 1 hour\r\n    return Math.ceil(diff / 60) + '分钟前'\r\n  } else if (diff < 3600 * 24) {\r\n    return Math.ceil(diff / 3600) + '小时前'\r\n  } else if (diff < 3600 * 24 * 2) {\r\n    return '1天前'\r\n  }\r\n  if (option) {\r\n    return parseTime(time, option)\r\n  } else {\r\n    return (\r\n      d.getMonth() +\r\n      1 +\r\n      '月' +\r\n      d.getDate() +\r\n      '日' +\r\n      d.getHours() +\r\n      '时' +\r\n      d.getMinutes() +\r\n      '分'\r\n    )\r\n  }\r\n}\r\n\r\n/**\r\n * @param {string} url\r\n * @returns {Object}\r\n */\r\nexport function param2Obj(url) {\r\n  const search = decodeURIComponent(url.split('?')[1]).replace(/\\+/g, ' ')\r\n  if (!search) {\r\n    return {}\r\n  }\r\n  const obj = {}\r\n  const searchArr = search.split('&')\r\n  searchArr.forEach(v => {\r\n    const index = v.indexOf('=')\r\n    if (index !== -1) {\r\n      const name = v.substring(0, index)\r\n      const val = v.substring(index + 1, v.length)\r\n      obj[name] = val\r\n    }\r\n  })\r\n  return obj\r\n}\r\n\r\nexport function generateTitle(title) {\r\n  const hasKey = this.$te('Route.' + title)\r\n\r\n  if (hasKey) {\r\n    // $t :this method from vue-i18n, inject in @/lang/index.js\r\n    const translatedTitle = this.$t('Route.' + title)\r\n\r\n    return translatedTitle\r\n  }\r\n  return title\r\n}\r\n\r\n/**\r\n * 获取当天的时间，YYYY-MM-DD\r\n */\r\nexport function getNowFormatDate() {\r\n  const date = new Date()\r\n  const seperator1 = '-'\r\n  const year = date.getFullYear()\r\n  let month = date.getMonth() + 1\r\n  let strDate = date.getDate()\r\n  if (month >= 1 && month <= 9) {\r\n    month = '0' + month\r\n  }\r\n  if (strDate >= 0 && strDate <= 9) {\r\n    strDate = '0' + strDate\r\n  }\r\n  var currentdate = year + seperator1 + month + seperator1 + strDate\r\n\r\n  return currentdate\r\n}\r\n/**\r\n * 获取当天时间 精确到min\r\n * @returns \r\n */\r\nexport function getNowFormatDateMin() {\r\n  const date = new Date()\r\n  const seperator1 = '-'\r\n  const year = date.getFullYear()\r\n  let month = date.getMonth() + 1\r\n  let strDate = date.getDate()\r\n  let strHour = date.getHours()\r\n  let strMinute = date.getMinutes()\r\n  if (month >= 1 && month <= 9) {\r\n    month = '0' + month\r\n  }\r\n  if (strDate >= 0 && strDate <= 9) {\r\n    strDate = '0' + strDate\r\n  }\r\n  if (strHour >= 0 && strHour <= 9) {\r\n    strHour = '0' + strHour\r\n  }\r\n  if (strMinute >= 0 && strMinute <= 9) {\r\n    strMinute = '0' + strMinute\r\n  }\r\n  var currentdate = year + seperator1 + month + seperator1 + strDate + ' ' + strHour + ':' + strMinute\r\n\r\n  return currentdate\r\n}\r\n//add\r\n/**\r\n * 获取当天时间 精确到miao\r\n * @returns \r\n */\r\nexport function getNowFormatDateMiao() {\r\n  const date = new Date()\r\n  const seperator1 = '-'\r\n  const year = date.getFullYear()\r\n  let month = date.getMonth() + 1\r\n  let strDate = date.getDate()\r\n  let strHour = date.getHours()\r\n  let strMinute = date.getMinutes()\r\n  let strSeconds = date.getSeconds()\r\n  if (month >= 1 && month <= 9) {\r\n    month = '0' + month\r\n  }\r\n  if (strDate >= 0 && strDate <= 9) {\r\n    strDate = '0' + strDate\r\n  }\r\n  if (strHour >= 0 && strHour <= 9) {\r\n    strHour = '0' + strHour\r\n  }\r\n  if (strMinute >= 0 && strMinute <= 9) {\r\n    strMinute = '0' + strMinute\r\n  }\r\n  if (strSeconds >= 0 && strSeconds <= 9) {\r\n    strSeconds = '0' + strSeconds\r\n  }\r\n  var currentdate = year + seperator1 + month + seperator1 + strDate + ' ' + strHour + ':' + strMinute + ':' + strSeconds\r\n\r\n  return currentdate\r\n}\r\n//end\r\n\r\nexport function getCurMonthDate() {\r\n  const date = new Date()\r\n  date.setDate(1)\r\n  date.setHours(0)\r\n  date.setMinutes(0)\r\n  date.setSeconds(0)\r\n  return date\r\n}\r\n\r\nexport function getTodayStartDate() {\r\n  const date = new Date()\r\n  date.setHours(0)\r\n  date.setMinutes(0)\r\n  date.setSeconds(0)\r\n  date.setMilliseconds(0)\r\n  return date\r\n}\r\n\r\nexport function getTodayEndDate() {\r\n  const date = new Date()\r\n  date.setHours(23)\r\n  date.setMinutes(59)\r\n  date.setSeconds(59)\r\n  date.setMilliseconds(999)\r\n  return date\r\n}\r\n\r\nexport function getNextFormatDate() {\r\n  const date = new Date()\r\n  date.setTime(date.getTime() + 3600 * 1000 * 24 * 1) // 后一天\r\n  const seperator1 = '-'\r\n  const year = date.getFullYear()\r\n  let month = date.getMonth() + 1\r\n  let strDate = date.getDate()\r\n  if (month >= 1 && month <= 9) {\r\n    month = '0' + month\r\n  }\r\n  if (strDate >= 0 && strDate <= 9) {\r\n    strDate = '0' + strDate\r\n  }\r\n  var currentdate = year + seperator1 + month + seperator1 + strDate\r\n\r\n  return currentdate\r\n}\r\n\r\n// eslint-disable-next-line\r\nDate.prototype.format = Date.prototype.format || function (fmt) {\r\n  var o = {\r\n    'M+': this.getMonth() + 1, // 月份 \r\n    'd+': this.getDate(), // 日 \r\n    'h+': this.getHours(), // 小时 \r\n    'm+': this.getMinutes(), // 分 \r\n    's+': this.getSeconds(), // 秒 \r\n    'q+': Math.floor((this.getMonth() + 3) / 3), // 季度 \r\n    'f': this.getMilliseconds() // 毫秒 \r\n  }\r\n  if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length))\r\n  for (var k in o) {\r\n    if (new RegExp('(' + k + ')').test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (('00' + o[k]).substr(('' + o[k]).length)))\r\n  }\r\n  return fmt\r\n}\r\n\r\n// timezone utc 转换\r\nexport function getTimeZoneString(TimezoneOffset) {\r\n  var strpm = '-'\r\n  if (TimezoneOffset < 0) {\r\n    strpm = '+'\r\n    TimezoneOffset = 0 - TimezoneOffset\r\n  }\r\n  var hours = Math.floor(TimezoneOffset / 60).toString()\r\n  var minutes = (TimezoneOffset % 60).toString()\r\n  return ('(UTC' + strpm + (hours.length < 2 ? '0' + hours : hours) + ':' + (minutes.length < 2 ? '0' + minutes : minutes) + ')')\r\n}\r\n// 统一格式\r\nexport function showTimeZone(time, TimezoneOffset, ignoreLocal = true) {\r\n  // eslint-disable-next-line\r\n  if (ignoreLocal && (!TimezoneOffset || TimezoneOffset == store.getters.timezone)) {\r\n    return time\r\n  }\r\n  return time + ' ' + getTimeZoneString(TimezoneOffset)\r\n}\r\n\r\n// 证件号加*\r\nexport function icdDocumentCode(value) {\r\n  if (!value) {\r\n    return ''\r\n  }\r\n  const _str = String(value)\r\n  let _return = _str\r\n\r\n  const re_str = '*******************************'\r\n  if (_str.length >= 11) {\r\n    _return = _str.slice(0, 3) + re_str.slice(0, _str.length - 7) + _str.slice(-4)\r\n  } else if (_str.length >= 6) {\r\n    _return = _str.slice(0, 2) + re_str.slice(0, _str.length - 4) + _str.slice(-2)\r\n  } else if (_str.length >= 2) {\r\n    _return = _str.slice(0, 1) + re_str.slice(0, _str.length - 2) + _str.slice(-1)\r\n  }\r\n  return _return\r\n}\r\n"
        }
    ]
}