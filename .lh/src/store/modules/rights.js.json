{
    "sourceFile": "src/store/modules/rights.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 13,
            "patches": [
                {
                    "date": 1637633165974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1637633311235,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,20 +176,20 @@\n       // 20210304 增加ICD用户\r\n       // else if(rights.username === 'system'){\r\n       //     accessedRoutes = ICDasyncRoutes|| []\r\n       // }\r\n-      if (rights.username === 'admin') {\r\n-        accessedRoutes = asyncRoutes || []\r\n-      } else {\r\n-        let rightPath = []\r\n-        // console.log(TransRights(rights))\r\n+      // if (rights.username === 'admin') {\r\n+      accessedRoutes = asyncRoutes || []\r\n+      // } else {\r\n+      //   let rightPath = []\r\n+      //   // console.log(TransRights(rights))\r\n \r\n-        // console.log(rights)\r\n-        rightPath = EncodeRightsEx(rights)\r\n-        // rightPath = Array.from(new Set(rightPath))\r\n-        accessedRoutes = filterAsyncRoutes(asyncRoutes, rightPath)\r\n-      }\r\n-      commit('SET_ROUTERKEEPAlIVE', routerKeepAlive)\r\n+      //   // console.log(rights)\r\n+      //   rightPath = EncodeRightsEx(rights)\r\n+      //   // rightPath = Array.from(new Set(rightPath))\r\n+      //   accessedRoutes = filterAsyncRoutes(asyncRoutes, rightPath)\r\n+      // }\r\n+      // commit('SET_ROUTERKEEPAlIVE', routerKeepAlive)\r\n       commit('SET_ROUTES', accessedRoutes)\r\n       resolve(accessedRoutes)\r\n     })\r\n   }\r\n"
                },
                {
                    "date": 1637633492758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -172,12 +172,8 @@\n   }, rights) {\r\n     return new Promise(resolve => {\r\n       let accessedRoutes\r\n       routerKeepAlive = []\r\n-      // 20210304 增加ICD用户\r\n-      // else if(rights.username === 'system'){\r\n-      //     accessedRoutes = ICDasyncRoutes|| []\r\n-      // }\r\n       // if (rights.username === 'admin') {\r\n       accessedRoutes = asyncRoutes || []\r\n       // } else {\r\n       //   let rightPath = []\r\n"
                },
                {
                    "date": 1637653323641,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -172,11 +172,12 @@\n   }, rights) {\r\n     return new Promise(resolve => {\r\n       let accessedRoutes\r\n       routerKeepAlive = []\r\n-      // if (rights.username === 'admin') {\r\n-      accessedRoutes = asyncRoutes || []\r\n-      // } else {\r\n+      if (rights.username === 'admin') {\r\n+        accessedRoutes = asyncRoutes || []\r\n+      }\r\n+      // else {\r\n       //   let rightPath = []\r\n       //   // console.log(TransRights(rights))\r\n \r\n       //   // console.log(rights)\r\n"
                },
                {
                    "date": 1637735405945,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,43 +1,18 @@\n-/*\r\n- * @Descripttion: \r\n- * @version: \r\n- * @Author: Bing\r\n- * @Date: 2020-10-21 17:45:13\r\n- * @LastEditors: sueRimn\r\n- * @LastEditTime: 2021-08-12 18:02:39\r\n- */\r\n import {\r\n   asyncRoutes,\r\n   constantRoutes\r\n } from '@/router' //, ICDasyncRoutes\r\n var routerKeepAlive = []\r\n-\r\n // eslint-disable-next-line\r\n var arryRights = {\r\n   'dashboard': 'dashboard',\r\n   '/history': '/history',\r\n   'record': 'record',\r\n   'registration': 'registration',\r\n   '/configuration': '/configuration',\r\n-  'basis': 'basis',\r\n   'visitplace': 'visitplace',\r\n-  'vms': 'vms-front-end',\r\n-  'datafield': 'datafield',\r\n-  'nationality': 'nationality',\r\n-  'databridge': 'data-bridge',\r\n-  '/administrator': '/administrator',\r\n-  'user': 'user',\r\n-  'email': 'email',\r\n-  'sms': 'sms',\r\n-  '/data': '/data',\r\n-  'visitor': 'visitor',\r\n-  'host': 'host',\r\n-  'database': 'database',\r\n-  'blacklist': 'blacklist',\r\n-  'whitelist': 'whitelist'\r\n }\r\n-\r\n // eslint-disable-next-line\r\n var arryRoutes = {\r\n   'dashboard': 'dashboard',\r\n   '/history': '/history',\r\n@@ -45,23 +20,58 @@\n   'registration': 'registration',\r\n   '/configuration': '/configuration',\r\n   'basis': 'basis',\r\n   'visitplace': 'visitplace',\r\n-  'vms': 'vms-front-end',\r\n-  'datafield': 'datafield',\r\n-  'nationality': 'nationality',\r\n-  'databridge': 'data-bridge',\r\n-  '/administrator': '/administrator',\r\n-  'user': 'user',\r\n-  'email': 'email',\r\n-  'sms': 'sms',\r\n-  '/data': '/data',\r\n-  'visitor': 'visitor',\r\n-  'host': 'host',\r\n-  'database': 'database',\r\n-  'blacklist': 'blacklist',\r\n-  'whitelist': 'whitelist'\r\n }\r\n+//原\r\n+// // eslint-disable-next-line\r\n+// var arryRights = {\r\n+//   'dashboard': 'dashboard',\r\n+//   '/history': '/history',\r\n+//   'record': 'record',\r\n+//   'registration': 'registration',\r\n+//   '/configuration': '/configuration',\r\n+//   'basis': 'basis',\r\n+//   'visitplace': 'visitplace',\r\n+//   'vms': 'vms-front-end',\r\n+//   'datafield': 'datafield',\r\n+//   'nationality': 'nationality',\r\n+//   'databridge': 'data-bridge',\r\n+//   '/administrator': '/administrator',\r\n+//   'user': 'user',\r\n+//   'email': 'email',\r\n+//   'sms': 'sms',\r\n+//   '/data': '/data',\r\n+//   'visitor': 'visitor',\r\n+//   'host': 'host',\r\n+//   'database': 'database',\r\n+//   'blacklist': 'blacklist',\r\n+//   'whitelist': 'whitelist'\r\n+// }\r\n+// // eslint-disable-next-line\r\n+// var arryRoutes = {\r\n+//   'dashboard': 'dashboard',\r\n+//   '/history': '/history',\r\n+//   'record': 'record',\r\n+//   'registration': 'registration',\r\n+//   '/configuration': '/configuration',\r\n+//   'basis': 'basis',\r\n+//   'visitplace': 'visitplace',\r\n+//   'vms': 'vms-front-end',\r\n+//   'datafield': 'datafield',\r\n+//   'nationality': 'nationality',\r\n+//   'databridge': 'data-bridge',\r\n+//   '/administrator': '/administrator',\r\n+//   'user': 'user',\r\n+//   'email': 'email',\r\n+//   'sms': 'sms',\r\n+//   '/data': '/data',\r\n+//   'visitor': 'visitor',\r\n+//   'host': 'host',\r\n+//   'database': 'database',\r\n+//   'blacklist': 'blacklist',\r\n+//   'whitelist': 'whitelist'\r\n+// }\r\n \r\n /**\r\n  * \r\n  * 权限转换rights -> route\r\n"
                },
                {
                    "date": 1637735539365,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,9 @@\n   'record': 'record',\r\n   'registration': 'registration',\r\n   '/configuration': '/configuration',\r\n   'visitplace': 'visitplace',\r\n+  '/locationConf': '/locationConf',\r\n }\r\n // eslint-disable-next-line\r\n var arryRoutes = {\r\n   'dashboard': 'dashboard',\r\n@@ -20,9 +21,11 @@\n   'registration': 'registration',\r\n   '/configuration': '/configuration',\r\n   'basis': 'basis',\r\n   'visitplace': 'visitplace',\r\n+  '/locationConf': '/locationConf',\r\n }\r\n+}\r\n //原\r\n // // eslint-disable-next-line\r\n // var arryRights = {\r\n //   'dashboard': 'dashboard',\r\n"
                },
                {
                    "date": 1637735808454,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,11 +21,10 @@\n   'registration': 'registration',\r\n   '/configuration': '/configuration',\r\n   'basis': 'basis',\r\n   'visitplace': 'visitplace',\r\n-  '/locationConf': '/locationConf',\r\n+  'locationConf': 'locationConf',\r\n }\r\n-}\r\n //原\r\n // // eslint-disable-next-line\r\n // var arryRights = {\r\n //   'dashboard': 'dashboard',\r\n"
                },
                {
                    "date": 1637735869414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n   'record': 'record',\r\n   'registration': 'registration',\r\n   '/configuration': '/configuration',\r\n   'visitplace': 'visitplace',\r\n-  '/locationConf': '/locationConf',\r\n+  'locationConf': 'locationConf',\r\n }\r\n // eslint-disable-next-line\r\n var arryRoutes = {\r\n   'dashboard': 'dashboard',\r\n"
                },
                {
                    "date": 1637738905836,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,21 +8,23 @@\n   'dashboard': 'dashboard',\r\n   '/history': '/history',\r\n   'record': 'record',\r\n   'registration': 'registration',\r\n-  '/configuration': '/configuration',\r\n-  'visitplace': 'visitplace',\r\n+  // '/configuration': '/configuration',\r\n+  // 'visitplace': 'visitplace',\r\n+  'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n }\r\n // eslint-disable-next-line\r\n var arryRoutes = {\r\n   'dashboard': 'dashboard',\r\n   '/history': '/history',\r\n   'record': 'record',\r\n   'registration': 'registration',\r\n-  '/configuration': '/configuration',\r\n   'basis': 'basis',\r\n-  'visitplace': 'visitplace',\r\n+  // '/configuration': '/configuration',\r\n+  // 'visitplace': 'visitplace',\r\n+  'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n }\r\n //原\r\n // // eslint-disable-next-line\r\n"
                },
                {
                    "date": 1637739226183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,10 +8,10 @@\n   'dashboard': 'dashboard',\r\n   '/history': '/history',\r\n   'record': 'record',\r\n   'registration': 'registration',\r\n-  // '/configuration': '/configuration',\r\n-  // 'visitplace': 'visitplace',\r\n+  '/configuration': '/configuration',\r\n+  'visitplace': 'visitplace',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n }\r\n // eslint-disable-next-line\r\n@@ -20,10 +20,10 @@\n   '/history': '/history',\r\n   'record': 'record',\r\n   'registration': 'registration',\r\n   'basis': 'basis',\r\n-  // '/configuration': '/configuration',\r\n-  // 'visitplace': 'visitplace',\r\n+  '/configuration': '/configuration',\r\n+  'visitplace': 'visitplace',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n }\r\n //原\r\n"
                },
                {
                    "date": 1637740068429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,10 +8,8 @@\n   'dashboard': 'dashboard',\r\n   '/history': '/history',\r\n   'record': 'record',\r\n   'registration': 'registration',\r\n-  '/configuration': '/configuration',\r\n-  'visitplace': 'visitplace',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n }\r\n // eslint-disable-next-line\r\n@@ -20,10 +18,8 @@\n   '/history': '/history',\r\n   'record': 'record',\r\n   'registration': 'registration',\r\n   'basis': 'basis',\r\n-  '/configuration': '/configuration',\r\n-  'visitplace': 'visitplace',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n }\r\n //原\r\n"
                },
                {
                    "date": 1637740427195,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,9 @@\n   'record': 'record',\r\n   'registration': 'registration',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n+  'Record': 'Record',\r\n }\r\n // eslint-disable-next-line\r\n var arryRoutes = {\r\n   'dashboard': 'dashboard',\r\n@@ -20,8 +21,9 @@\n   'registration': 'registration',\r\n   'basis': 'basis',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n+  'Record': 'Record',\r\n }\r\n //原\r\n // // eslint-disable-next-line\r\n // var arryRights = {\r\n"
                },
                {
                    "date": 1637740471030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,20 +5,20 @@\n var routerKeepAlive = []\r\n // eslint-disable-next-line\r\n var arryRights = {\r\n   'dashboard': 'dashboard',\r\n-  '/history': '/history',\r\n-  'record': 'record',\r\n+  // '/history': '/history',\r\n+  // 'record': 'record',\r\n   'registration': 'registration',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n   'Record': 'Record',\r\n }\r\n // eslint-disable-next-line\r\n var arryRoutes = {\r\n   'dashboard': 'dashboard',\r\n-  '/history': '/history',\r\n-  'record': 'record',\r\n+  // '/history': '/history',\r\n+  // 'record': 'record',\r\n   'registration': 'registration',\r\n   'basis': 'basis',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n"
                },
                {
                    "date": 1637740853415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n var arryRights = {\r\n   'dashboard': 'dashboard',\r\n   // '/history': '/history',\r\n   // 'record': 'record',\r\n-  'registration': 'registration',\r\n+  // 'registration': 'registration',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n   'Record': 'Record',\r\n }\r\n@@ -17,10 +17,10 @@\n var arryRoutes = {\r\n   'dashboard': 'dashboard',\r\n   // '/history': '/history',\r\n   // 'record': 'record',\r\n-  'registration': 'registration',\r\n-  'basis': 'basis',\r\n+  // 'registration': 'registration',\r\n+  // 'basis': 'basis',\r\n   'expressType': 'expressType',\r\n   'locationConf': 'locationConf',\r\n   'Record': 'Record',\r\n }\r\n"
                }
            ],
            "date": 1637633165974,
            "name": "Commit-0",
            "content": "/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: Bing\r\n * @Date: 2020-10-21 17:45:13\r\n * @LastEditors: sueRimn\r\n * @LastEditTime: 2021-08-12 18:02:39\r\n */\r\nimport {\r\n  asyncRoutes,\r\n  constantRoutes\r\n} from '@/router' //, ICDasyncRoutes\r\nvar routerKeepAlive = []\r\n\r\n// eslint-disable-next-line\r\nvar arryRights = {\r\n  'dashboard': 'dashboard',\r\n  '/history': '/history',\r\n  'record': 'record',\r\n  'registration': 'registration',\r\n  '/configuration': '/configuration',\r\n  'basis': 'basis',\r\n  'visitplace': 'visitplace',\r\n  'vms': 'vms-front-end',\r\n  'datafield': 'datafield',\r\n  'nationality': 'nationality',\r\n  'databridge': 'data-bridge',\r\n  '/administrator': '/administrator',\r\n  'user': 'user',\r\n  'email': 'email',\r\n  'sms': 'sms',\r\n  '/data': '/data',\r\n  'visitor': 'visitor',\r\n  'host': 'host',\r\n  'database': 'database',\r\n  'blacklist': 'blacklist',\r\n  'whitelist': 'whitelist'\r\n}\r\n\r\n// eslint-disable-next-line\r\nvar arryRoutes = {\r\n  'dashboard': 'dashboard',\r\n  '/history': '/history',\r\n  'record': 'record',\r\n  'registration': 'registration',\r\n  '/configuration': '/configuration',\r\n  'basis': 'basis',\r\n  'visitplace': 'visitplace',\r\n  'vms': 'vms-front-end',\r\n  'datafield': 'datafield',\r\n  'nationality': 'nationality',\r\n  'databridge': 'data-bridge',\r\n  '/administrator': '/administrator',\r\n  'user': 'user',\r\n  'email': 'email',\r\n  'sms': 'sms',\r\n  '/data': '/data',\r\n  'visitor': 'visitor',\r\n  'host': 'host',\r\n  'database': 'database',\r\n  'blacklist': 'blacklist',\r\n  'whitelist': 'whitelist'\r\n}\r\n\r\n/**\r\n * \r\n * 权限转换rights -> route\r\n * string type\r\n */\r\nexport function TransRoutes(RightsEx) {\r\n  const strRights = JSON.parse(RightsEx)\r\n  const Rigths = {}\r\n  for (const i in strRights) {\r\n    for (const j in arryRoutes) {\r\n      // eslint-disable-next-line\r\n      if (i == j) {\r\n        Rigths[arryRoutes[j]] = strRights[i]\r\n      }\r\n    }\r\n  }\r\n  return Rigths\r\n}\r\n\r\n/**\r\n * \r\n * 权限转换 route ->rights \r\n * string type\r\n */\r\nexport function TransRights(Route) {\r\n  const strRoute = JSON.parse(Route)\r\n  const Rigths = {}\r\n  for (const i in strRoute) {\r\n    for (const j in arryRights) {\r\n      // eslint-disable-next-line\r\n      if (i == j) {\r\n        Rigths[arryRights[j]] = strRoute[i]\r\n      }\r\n    }\r\n  }\r\n  return Rigths\r\n}\r\n\r\n/**\r\n * 解析路由权限\r\n */\r\nexport function EncodeRightsEx(RightsEx) {\r\n  let rightPath = []\r\n  const strToObj = JSON.parse(RightsEx)\r\n  // 更换权限格式\r\n  for (const i in strToObj) {\r\n    if (typeof (strToObj[i].V) !== 'undefined' && strToObj[i].V !== '') {\r\n      rightPath.push(i)\r\n    }\r\n  }\r\n  rightPath = Array.from(new Set(rightPath))\r\n  return rightPath\r\n}\r\n\r\n// function hasRights(rights, route) {\r\n//     if (route.meta && route.meta.rights) {\r\n//         let Test = route.meta.rights.includes(rights)\r\n//         return Test\r\n//     } else {\r\n//         return true\r\n//     }\r\n//     //\r\n// }\r\n\r\nexport function filterAsyncRoutes(routes, rights) {\r\n  const res = []\r\n\r\n  routes.forEach(route => {\r\n    const tmp = {\r\n      ...route\r\n    }\r\n    for (const index in rights) {\r\n      if (tmp.path === rights[index]) {\r\n        if (tmp.children) {\r\n          tmp.children = filterAsyncRoutes(tmp.children, rights)\r\n        }\r\n        if (tmp.meta && tmp.meta.keepAlive && tmp.name) {\r\n          routerKeepAlive.push(tmp.name)\r\n        }\r\n        res.push(tmp)\r\n      }\r\n    }\r\n    if (tmp.path === '*') {\r\n      res.push(tmp)\r\n    }\r\n  })\r\n  return res\r\n}\r\n\r\nconst state = {\r\n  routes: [],\r\n  addRoutes: []\r\n}\r\n\r\nconst mutations = {\r\n  SET_ROUTES: (state, routes) => {\r\n    state.addRoutes = routes\r\n    state.routes = constantRoutes.concat(routes)\r\n  },\r\n  SET_ROUTERKEEPAlIVE: (state, routerKeepAlive) => {\r\n    state.routerKeepAlive = routerKeepAlive\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  generateRoutes({\r\n    commit\r\n  }, rights) {\r\n    return new Promise(resolve => {\r\n      let accessedRoutes\r\n      routerKeepAlive = []\r\n      // 20210304 增加ICD用户\r\n      // else if(rights.username === 'system'){\r\n      //     accessedRoutes = ICDasyncRoutes|| []\r\n      // }\r\n      if (rights.username === 'admin') {\r\n        accessedRoutes = asyncRoutes || []\r\n      } else {\r\n        let rightPath = []\r\n        // console.log(TransRights(rights))\r\n\r\n        // console.log(rights)\r\n        rightPath = EncodeRightsEx(rights)\r\n        // rightPath = Array.from(new Set(rightPath))\r\n        accessedRoutes = filterAsyncRoutes(asyncRoutes, rightPath)\r\n      }\r\n      commit('SET_ROUTERKEEPAlIVE', routerKeepAlive)\r\n      commit('SET_ROUTES', accessedRoutes)\r\n      resolve(accessedRoutes)\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n"
        }
    ]
}