{
    "sourceFile": "src/views/login/index.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 28,
            "patches": [
                {
                    "date": 1637572241242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1637629174483,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,427 @@\n+<template>\r\n+  <div class=\"login-container\" align=\"center\">\r\n+    <div class=\"login-card\">\r\n+      <div\r\n+        class=\"card-left\"\r\n+        :style=\"{ backgroundImage: 'url(' + leftImg + ')' }\"\r\n+      ></div>\r\n+      <div class=\"card-right\">\r\n+        <div v-if=\"ShowLanguage\" class=\"langicon-div\">\r\n+          <lang-select class=\"right-menu-item hover-effect langicon\" />\r\n+        </div>\r\n+        <div align=\"center\" class=\"card-form\">\r\n+          <el-form\r\n+            ref=\"loginForm\"\r\n+            :model=\"loginForm\"\r\n+            :rules=\"loginRules\"\r\n+            class=\"login-form\"\r\n+            auto-complete=\"on\"\r\n+            label-position=\"left\"\r\n+          >\r\n+            <div class=\"title-container\">\r\n+              <div class=\"title\">\r\n+                <h3>{{ $t(\"Login.Title\") }}</h3>\r\n+              </div>\r\n+              <div class=\"login-logo logo-div\">\r\n+                <!-- <img src=\"@/assets/basic/logo_NYU_white.png\" alt=\"logo\"> -->\r\n+                <div style=\"height: 40px\" />\r\n+              </div>\r\n+            </div>\r\n+\r\n+            <el-form-item prop=\"username\">\r\n+              <span class=\"svg-container\">\r\n+                <svg-icon icon-class=\"user\" />\r\n+              </span>\r\n+              <el-input\r\n+                ref=\"username\"\r\n+                v-model=\"loginForm.username\"\r\n+                v-input-filter:common\r\n+                :placeholder=\"$t('Login.UserName')\"\r\n+                name=\"username\"\r\n+                type=\"text\"\r\n+                tabindex=\"1\"\r\n+                auto-complete=\"on\"\r\n+                maxlength=\"32\"\r\n+                @keypress.native.enter=\"onEnterPress\"\r\n+              />\r\n+            </el-form-item>\r\n+            <el-form-item prop=\"password\">\r\n+              <span class=\"svg-container\">\r\n+                <svg-icon icon-class=\"password\" />\r\n+              </span>\r\n+              <el-input\r\n+                :key=\"passwordType\"\r\n+                ref=\"password\"\r\n+                v-model=\"loginForm.password\"\r\n+                v-input-filter:pwd\r\n+                :type=\"passwordType\"\r\n+                :placeholder=\"$t('Login.Password')\"\r\n+                name=\"password\"\r\n+                tabindex=\"2\"\r\n+                auto-complete=\"on\"\r\n+                maxlength=\"64\"\r\n+                @keyup.enter.native=\"handleLogin\"\r\n+              />\r\n+              <span class=\"show-pwd\" @click=\"showPwd\">\r\n+                <svg-icon\r\n+                  :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\r\n+                />\r\n+              </span>\r\n+            </el-form-item>\r\n+            <el-button\r\n+              :loading=\"loading\"\r\n+              type=\"primary\"\r\n+              round\r\n+              class=\"loginbtn\"\r\n+              @click.native.prevent=\"handleLogin\"\r\n+              >{{ $t(\"Login.Login\") }}</el-button\r\n+            >\r\n+            <div class=\"tips\">\r\n+              <span>{{ loginErr }}</span>\r\n+            </div>\r\n+          </el-form>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</template>\r\n+\r\n+<script>\r\n+import i18n from \"@/languages\";\r\n+import { mapGetters } from \"vuex\";\r\n+import LangSelect from \"@/components/LanguageSelect\";\r\n+export default {\r\n+  components: {\r\n+    LangSelect,\r\n+  },\r\n+  // name: 'Login',\r\n+  data() {\r\n+    const validateUsername = (rule, value, callback) => {\r\n+      if (!value) {\r\n+        callback(new Error(this.$t(\"EmptyTip\")));\r\n+      } else {\r\n+        callback();\r\n+      }\r\n+    };\r\n+    return {\r\n+      loginForm: {\r\n+        username: this.name,\r\n+        password: \"\",\r\n+        vefcode_img: \"\",\r\n+      },\r\n+      loginRules: {\r\n+        username: [\r\n+          { required: true, trigger: \"blur\", validator: validateUsername },\r\n+        ],\r\n+        // password: [{ required: true, trigger: 'blur', validator: validatePassword }]\r\n+      },\r\n+      loading: false,\r\n+      passwordType: \"password\",\r\n+      redirect: undefined,\r\n+      leftImg: require(\"@/assets/basic/homebus_left.png\"),\r\n+      loginErr: \"\",\r\n+      errortip: \"\",\r\n+      showtip: false,\r\n+      // eslint-disable-next-line\r\n+      ShowLanguage: true, // 是否展现语言切换\r\n+    };\r\n+  },\r\n+  computed: {\r\n+    ...mapGetters([\"name\"]),\r\n+  },\r\n+  watch: {\r\n+    $route: {\r\n+      handler: function (route) {\r\n+        this.redirect = route.query && route.query.redirect;\r\n+      },\r\n+      immediate: true,\r\n+    },\r\n+  },\r\n+  mounted: function () {\r\n+    // this.changeValidImg()\r\n+  },\r\n+  // beforeMount() {\r\n+  //   store.dispatch('app/checkNavigator', navigator)\r\n+  // },\r\n+  methods: {\r\n+    onEnterPress() {\r\n+      this.handleLogin();\r\n+    },\r\n+    showPwd() {\r\n+      if (this.passwordType === \"password\") {\r\n+        this.passwordType = \"\";\r\n+      } else {\r\n+        this.passwordType = \"password\";\r\n+      }\r\n+      this.$nextTick(() => {\r\n+        this.$refs.password.focus();\r\n+      });\r\n+    },\r\n+    handleLogin() {\r\n+      this.loginErr = \"\";\r\n+      this.$refs.loginForm.validate((valid) => {\r\n+        if (valid) {\r\n+          console.log(\"qq\", valid);\r\n+          this.loading = true;\r\n+          // 20210305 密码改为MD5\r\n+          this.loginForm.secret = this.$md5(this.loginForm.password);\r\n+          this.$store\r\n+            .dispatch(\"user/login\", this.loginForm)\r\n+            .then(() => {\r\n+              this.$router.push({ path: this.redirect || \"/\" });\r\n+              this.loading = false;\r\n+            })\r\n+            .catch((error) => {\r\n+              const strError = error + \"\";\r\n+              console.log(strError);\r\n+              if (strError === \"Error: 22\" || strError === \"Error: 21\") {\r\n+                this.loginErr = i18n.t(\"Error.ErrorPassword\");\r\n+              } else if (strError === \"Error: 101\") {\r\n+                this.loginErr = i18n.t(\"Error.VaildCodeError\");\r\n+              } else if (strError === \"Error: 142\") {\r\n+                this.loginErr = i18n.t(\"Error.PwdExpired\");\r\n+              }\r\n+              // this.changeValidImg()\r\n+              this.loading = false;\r\n+            });\r\n+        } else {\r\n+          return false;\r\n+        }\r\n+      });\r\n+    },\r\n+    /**\r\n+    更改验证码图片\r\n+     */\r\n+    changeValidImg() {\r\n+      var src = \"\";\r\n+      if (process.env.NODE_ENV === \"development\") {\r\n+        src =\r\n+          process.env.VUE_APP_BASE_API +\r\n+          \"/vefcode/getimg/?random=\" +\r\n+          Math.random();\r\n+      } else if (process.env.NODE_ENV === \"production\") {\r\n+        src =\r\n+          process.env.VUE_APP_BASE_API +\r\n+          \"vefcode/getimg/?random=\" +\r\n+          Math.random();\r\n+      }\r\n+      document.getElementById(\"validimg\").src = src;\r\n+    },\r\n+  },\r\n+};\r\n+</script>\r\n+\r\n+<style lang=\"scss\">\r\n+$bg: #fff;\r\n+$light_gray: #fff;\r\n+$cursor: rgb(15, 99, 73);\r\n+$spanclr: #606266;\r\n+$mainclr: rgb(15, 99, 73);\r\n+@supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\r\n+  .login-container .el-input input {\r\n+    color: $cursor;\r\n+  }\r\n+}\r\n+.codeimg {\r\n+  line-height: 47px;\r\n+  width: 100%;\r\n+  height: 47px;\r\n+  padding: 2px 0 2px 10px;\r\n+}\r\n+.logo-div {\r\n+  margin: 30px;\r\n+}\r\n+.langicon-div {\r\n+  top: 1rem;\r\n+  right: 1rem;\r\n+  float: right;\r\n+}\r\n+.langicon {\r\n+  width: 50px;\r\n+  height: 50px;\r\n+  margin: 20px;\r\n+  color: rgb(15, 99, 73);\r\n+  font-size: 2rem;\r\n+}\r\n+/* reset element-ui css */\r\n+.login-container {\r\n+  .el-input {\r\n+    display: inline-block;\r\n+    height: 47px;\r\n+    width: 85%;\r\n+\r\n+    input {\r\n+      background: transparent;\r\n+      border: 0px;\r\n+      -webkit-appearance: none;\r\n+      border-radius: 0px;\r\n+      padding: 12px 5px 12px 15px;\r\n+      color: $spanclr;\r\n+      height: 47px;\r\n+      caret-color: $cursor;\r\n+\r\n+      &:-webkit-autofill {\r\n+        box-shadow: 0 0 0px 1000px $bg inset !important;\r\n+        -webkit-text-fill-color: $cursor !important;\r\n+      }\r\n+    }\r\n+  }\r\n+\r\n+  .el-form-item {\r\n+    //border: 1px solid rgba(255, 255, 255, 0.1);\r\n+    // background: rgba(0, 0, 0, 0.1);\r\n+    border-radius: 5px;\r\n+    color: #454545;\r\n+    border: 1px solid #c4cbdc;\r\n+  }\r\n+}\r\n+</style>\r\n+\r\n+<style lang=\"scss\" scoped>\r\n+$bg: #2d3a4b;\r\n+$dark_gray: #889aa4;\r\n+$light_gray: #eee;\r\n+$bkclr: #f4f5f9;\r\n+$spanclr: #606266;\r\n+$mainclr: rgb(15, 99, 73);\r\n+.login-container {\r\n+  margin: 0 auto;\r\n+  width: 100%;\r\n+  height: 100%;\r\n+  background-color: $bkclr;\r\n+  overflow: hidden;\r\n+  .login-card {\r\n+    @media screen and (max-width: 575px) {\r\n+    }\r\n+    @media screen and (min-width: 576px) {\r\n+      margin-top: 10rem;\r\n+    }\r\n+    @media screen and (max-height: 900px) {\r\n+      margin-top: 0;\r\n+    }\r\n+    position: relative;\r\n+    box-sizing: border-box;\r\n+    display: table;\r\n+    border-radius: 4px;\r\n+    border: 1px solid #ebeef5;\r\n+    background-color: #fff;\r\n+    color: $spanclr;\r\n+    -webkit-transition: 0.3s;\r\n+    transition: 0.3s;\r\n+    box-shadow: 0 4px 24px 0 rgba(0, 0, 0, 0.2);\r\n+    width: 100%;\r\n+    max-width: 1000px;\r\n+    position: relative;\r\n+    .card-left {\r\n+      background-color: rgba(255, 255, 255, 1);\r\n+      background-size: 100% 100%;\r\n+      height: 100%;\r\n+      width: 50%;\r\n+      float: left;\r\n+      position: relative;\r\n+      opacity: 0.9;\r\n+      // width: calc(100% - 250px);\r\n+      min-height: 650px;\r\n+      @media screen and (max-width: 575px) {\r\n+        display: none;\r\n+      }\r\n+      .title {\r\n+        background-color: rgba(255, 255, 255, 0.7);\r\n+        top: 0;\r\n+        padding: 40px;\r\n+        span {\r\n+          color: rgba(15, 99, 73.9);\r\n+          padding: 30px;\r\n+          font-size: 2rem;\r\n+          font-weight: bold;\r\n+        }\r\n+      }\r\n+    }\r\n+    .card-right {\r\n+      background-color: white;\r\n+      width: 50%;\r\n+      float: left;\r\n+      @media screen and (max-width: 575px) {\r\n+        width: 100%;\r\n+      }\r\n+      .card-form {\r\n+        width: 80%;\r\n+        @media screen and (max-width: 575px) {\r\n+          width: 100%;\r\n+        }\r\n+      }\r\n+      .loginbtn {\r\n+        width: 100%;\r\n+        margin-bottom: 10px;\r\n+        font-size: 1.2rem;\r\n+        margin-top: 20px;\r\n+      }\r\n+    }\r\n+  }\r\n+  .login-form {\r\n+    // position: relative;\r\n+    // width: 520px;\r\n+    width: 100%;\r\n+    padding: 0 30px 30px 30px;\r\n+    margin: 0 auto;\r\n+    overflow: hidden;\r\n+  }\r\n+\r\n+  .tips {\r\n+    font-size: 1rem;\r\n+    color: red;\r\n+    margin-top: 5px;\r\n+    span {\r\n+      &:first-of-type {\r\n+        margin-right: 16px;\r\n+      }\r\n+    }\r\n+  }\r\n+\r\n+  .svg-container {\r\n+    padding: 6px 5px 6px 15px;\r\n+    color: $dark_gray;\r\n+    vertical-align: middle;\r\n+    width: 30px;\r\n+    display: inline-block;\r\n+  }\r\n+\r\n+  .title-container {\r\n+    position: relative;\r\n+\r\n+    .title {\r\n+      font-size: 26px;\r\n+      color: $mainclr;\r\n+      // margin-top: 20px;\r\n+      text-align: center;\r\n+      font-weight: bold;\r\n+    }\r\n+  }\r\n+\r\n+  .show-pwd {\r\n+    position: absolute;\r\n+    right: 10px;\r\n+    top: 7px;\r\n+    font-size: 16px;\r\n+    color: $dark_gray;\r\n+    cursor: pointer;\r\n+    user-select: none;\r\n+  }\r\n+}\r\n+</style>\r\n+\r\n+<style lang=\"scss\" scoped>\r\n+/* something not from the original code */\r\n+.login-logo {\r\n+  text-align: center;\r\n+  svg {\r\n+    width: 100%;\r\n+    height: auto;\r\n+  }\r\n+  img {\r\n+    width: 60%;\r\n+    max-width: 300px;\r\n+    margin-bottom: 2rem;\r\n+  }\r\n+}\r\n+</style>\r\n"
                },
                {
                    "date": 1637632993487,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,9 +167,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.password);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              this.$router.push({ path: this.redirect || \"/\" });\r\n+              // this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n               const strError = error + \"\";\r\n@@ -424,430 +424,4 @@\n     margin-bottom: 2rem;\r\n   }\r\n }\r\n </style>\r\n-<template>\r\n-  <div class=\"login-container\" align=\"center\">\r\n-    <div class=\"login-card\">\r\n-      <div\r\n-        class=\"card-left\"\r\n-        :style=\"{ backgroundImage: 'url(' + leftImg + ')' }\"\r\n-      ></div>\r\n-      <div class=\"card-right\">\r\n-        <div v-if=\"ShowLanguage\" class=\"langicon-div\">\r\n-          <lang-select class=\"right-menu-item hover-effect langicon\" />\r\n-        </div>\r\n-        <div align=\"center\" class=\"card-form\">\r\n-          <el-form\r\n-            ref=\"loginForm\"\r\n-            :model=\"loginForm\"\r\n-            :rules=\"loginRules\"\r\n-            class=\"login-form\"\r\n-            auto-complete=\"on\"\r\n-            label-position=\"left\"\r\n-          >\r\n-            <div class=\"title-container\">\r\n-              <div class=\"title\">\r\n-                <h3>{{ $t(\"Login.Title\") }}</h3>\r\n-              </div>\r\n-              <div class=\"login-logo logo-div\">\r\n-                <!-- <img src=\"@/assets/basic/logo_NYU_white.png\" alt=\"logo\"> -->\r\n-                <div style=\"height: 40px\" />\r\n-              </div>\r\n-            </div>\r\n-\r\n-            <el-form-item prop=\"username\">\r\n-              <span class=\"svg-container\">\r\n-                <svg-icon icon-class=\"user\" />\r\n-              </span>\r\n-              <el-input\r\n-                ref=\"username\"\r\n-                v-model=\"loginForm.username\"\r\n-                v-input-filter:common\r\n-                :placeholder=\"$t('Login.UserName')\"\r\n-                name=\"username\"\r\n-                type=\"text\"\r\n-                tabindex=\"1\"\r\n-                auto-complete=\"on\"\r\n-                maxlength=\"32\"\r\n-                @keypress.native.enter=\"onEnterPress\"\r\n-              />\r\n-            </el-form-item>\r\n-            <el-form-item prop=\"password\">\r\n-              <span class=\"svg-container\">\r\n-                <svg-icon icon-class=\"password\" />\r\n-              </span>\r\n-              <el-input\r\n-                :key=\"passwordType\"\r\n-                ref=\"password\"\r\n-                v-model=\"loginForm.password\"\r\n-                v-input-filter:pwd\r\n-                :type=\"passwordType\"\r\n-                :placeholder=\"$t('Login.Password')\"\r\n-                name=\"password\"\r\n-                tabindex=\"2\"\r\n-                auto-complete=\"on\"\r\n-                maxlength=\"64\"\r\n-                @keyup.enter.native=\"handleLogin\"\r\n-              />\r\n-              <span class=\"show-pwd\" @click=\"showPwd\">\r\n-                <svg-icon\r\n-                  :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\r\n-                />\r\n-              </span>\r\n-            </el-form-item>\r\n-            <el-button\r\n-              :loading=\"loading\"\r\n-              type=\"primary\"\r\n-              round\r\n-              class=\"loginbtn\"\r\n-              @click.native.prevent=\"handleLogin\"\r\n-              >{{ $t(\"Login.Login\") }}</el-button\r\n-            >\r\n-            <div class=\"tips\">\r\n-              <span>{{ loginErr }}</span>\r\n-            </div>\r\n-          </el-form>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-</template>\r\n-\r\n-<script>\r\n-import i18n from \"@/languages\";\r\n-import { mapGetters } from \"vuex\";\r\n-import LangSelect from \"@/components/LanguageSelect\";\r\n-export default {\r\n-  components: {\r\n-    LangSelect,\r\n-  },\r\n-  // name: 'Login',\r\n-  data() {\r\n-    const validateUsername = (rule, value, callback) => {\r\n-      if (!value) {\r\n-        callback(new Error(this.$t(\"EmptyTip\")));\r\n-      } else {\r\n-        callback();\r\n-      }\r\n-    };\r\n-    return {\r\n-      loginForm: {\r\n-        username: this.name,\r\n-        password: \"\",\r\n-        vefcode_img: \"\",\r\n-      },\r\n-      loginRules: {\r\n-        username: [\r\n-          { required: true, trigger: \"blur\", validator: validateUsername },\r\n-        ],\r\n-        // password: [{ required: true, trigger: 'blur', validator: validatePassword }]\r\n-      },\r\n-      loading: false,\r\n-      passwordType: \"password\",\r\n-      redirect: undefined,\r\n-      leftImg: require(\"@/assets/basic/homebus_left.png\"),\r\n-      loginErr: \"\",\r\n-      errortip: \"\",\r\n-      showtip: false,\r\n-      // eslint-disable-next-line\r\n-      ShowLanguage: true, // 是否展现语言切换\r\n-    };\r\n-  },\r\n-  computed: {\r\n-    ...mapGetters([\"name\"]),\r\n-  },\r\n-  watch: {\r\n-    $route: {\r\n-      handler: function (route) {\r\n-        this.redirect = route.query && route.query.redirect;\r\n-      },\r\n-      immediate: true,\r\n-    },\r\n-  },\r\n-  mounted: function () {\r\n-    // this.changeValidImg()\r\n-  },\r\n-  // beforeMount() {\r\n-  //   store.dispatch('app/checkNavigator', navigator)\r\n-  // },\r\n-  methods: {\r\n-    onEnterPress() {\r\n-      this.handleLogin();\r\n-    },\r\n-    showPwd() {\r\n-      if (this.passwordType === \"password\") {\r\n-        this.passwordType = \"\";\r\n-      } else {\r\n-        this.passwordType = \"password\";\r\n-      }\r\n-      this.$nextTick(() => {\r\n-        this.$refs.password.focus();\r\n-      });\r\n-    },\r\n-    handleLogin() {\r\n-      this.loginErr = \"\";\r\n-      this.$refs.loginForm.validate((valid) => {\r\n-        if (valid) {\r\n-          this.loading = true;\r\n-          // 20210305 密码改为MD5\r\n-          this.loginForm.secret = this.$md5(this.loginForm.password);\r\n-          this.$store\r\n-            .dispatch(\"user/login\", this.loginForm)\r\n-            .then(() => {\r\n-              this.$router.push({ path: this.redirect || \"/\" });\r\n-              this.loading = false;\r\n-            })\r\n-            .catch((error) => {\r\n-              const strError = error + \"\";\r\n-              console.log(strError);\r\n-              if (strError === \"Error: 22\" || strError === \"Error: 21\") {\r\n-                this.loginErr = i18n.t(\"Error.ErrorPassword\");\r\n-              } else if (strError === \"Error: 101\") {\r\n-                this.loginErr = i18n.t(\"Error.VaildCodeError\");\r\n-              } else if (strError === \"Error: 142\") {\r\n-                this.loginErr = i18n.t(\"Error.PwdExpired\");\r\n-              }\r\n-              // this.changeValidImg()\r\n-              this.loading = false;\r\n-            });\r\n-        } else {\r\n-          return false;\r\n-        }\r\n-      });\r\n-    },\r\n-    /**\r\n-    更改验证码图片\r\n-     */\r\n-    changeValidImg() {\r\n-      var src = \"\";\r\n-      if (process.env.NODE_ENV === \"development\") {\r\n-        src =\r\n-          process.env.VUE_APP_BASE_API +\r\n-          \"/vefcode/getimg/?random=\" +\r\n-          Math.random();\r\n-      } else if (process.env.NODE_ENV === \"production\") {\r\n-        src =\r\n-          process.env.VUE_APP_BASE_API +\r\n-          \"vefcode/getimg/?random=\" +\r\n-          Math.random();\r\n-      }\r\n-      document.getElementById(\"validimg\").src = src;\r\n-    },\r\n-  },\r\n-};\r\n-</script>\r\n-\r\n-<style lang=\"scss\">\r\n-$bg: #fff;\r\n-$light_gray: #fff;\r\n-$cursor: rgb(15, 99, 73);\r\n-$spanclr: #606266;\r\n-$mainclr: rgb(15, 99, 73);\r\n-@supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\r\n-  .login-container .el-input input {\r\n-    color: $cursor;\r\n-  }\r\n-}\r\n-.codeimg {\r\n-  line-height: 47px;\r\n-  width: 100%;\r\n-  height: 47px;\r\n-  padding: 2px 0 2px 10px;\r\n-}\r\n-.logo-div {\r\n-  margin: 30px;\r\n-}\r\n-.langicon-div {\r\n-  top: 1rem;\r\n-  right: 1rem;\r\n-  float: right;\r\n-}\r\n-.langicon {\r\n-  width: 50px;\r\n-  height: 50px;\r\n-  margin: 20px;\r\n-  color: rgb(15, 99, 73);\r\n-  font-size: 2rem;\r\n-}\r\n-/* reset element-ui css */\r\n-.login-container {\r\n-  .el-input {\r\n-    display: inline-block;\r\n-    height: 47px;\r\n-    width: 85%;\r\n-\r\n-    input {\r\n-      background: transparent;\r\n-      border: 0px;\r\n-      -webkit-appearance: none;\r\n-      border-radius: 0px;\r\n-      padding: 12px 5px 12px 15px;\r\n-      color: $spanclr;\r\n-      height: 47px;\r\n-      caret-color: $cursor;\r\n-\r\n-      &:-webkit-autofill {\r\n-        box-shadow: 0 0 0px 1000px $bg inset !important;\r\n-        -webkit-text-fill-color: $cursor !important;\r\n-      }\r\n-    }\r\n-  }\r\n-\r\n-  .el-form-item {\r\n-    //border: 1px solid rgba(255, 255, 255, 0.1);\r\n-    // background: rgba(0, 0, 0, 0.1);\r\n-    border-radius: 5px;\r\n-    color: #454545;\r\n-    border: 1px solid #c4cbdc;\r\n-  }\r\n-}\r\n-</style>\r\n-\r\n-<style lang=\"scss\" scoped>\r\n-$bg: #2d3a4b;\r\n-$dark_gray: #889aa4;\r\n-$light_gray: #eee;\r\n-$bkclr: #f4f5f9;\r\n-$spanclr: #606266;\r\n-$mainclr: rgb(15, 99, 73);\r\n-.login-container {\r\n-  margin: 0 auto;\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  background-color: $bkclr;\r\n-  overflow: hidden;\r\n-  .login-card {\r\n-    @media screen and (max-width: 575px) {\r\n-    }\r\n-    @media screen and (min-width: 576px) {\r\n-      margin-top: 10rem;\r\n-    }\r\n-    @media screen and (max-height: 900px) {\r\n-      margin-top: 0;\r\n-    }\r\n-    position: relative;\r\n-    box-sizing: border-box;\r\n-    display: table;\r\n-    border-radius: 4px;\r\n-    border: 1px solid #ebeef5;\r\n-    background-color: #fff;\r\n-    color: $spanclr;\r\n-    -webkit-transition: 0.3s;\r\n-    transition: 0.3s;\r\n-    box-shadow: 0 4px 24px 0 rgba(0, 0, 0, 0.2);\r\n-    width: 100%;\r\n-    max-width: 1000px;\r\n-    position: relative;\r\n-    .card-left {\r\n-      background-color: rgba(255, 255, 255, 1);\r\n-      background-size: 100% 100%;\r\n-      height: 100%;\r\n-      width: 50%;\r\n-      float: left;\r\n-      position: relative;\r\n-      opacity: 0.9;\r\n-      // width: calc(100% - 250px);\r\n-      min-height: 650px;\r\n-      @media screen and (max-width: 575px) {\r\n-        display: none;\r\n-      }\r\n-      .title {\r\n-        background-color: rgba(255, 255, 255, 0.7);\r\n-        top: 0;\r\n-        padding: 40px;\r\n-        span {\r\n-          color: rgba(15, 99, 73.9);\r\n-          padding: 30px;\r\n-          font-size: 2rem;\r\n-          font-weight: bold;\r\n-        }\r\n-      }\r\n-    }\r\n-    .card-right {\r\n-      background-color: white;\r\n-      width: 50%;\r\n-      float: left;\r\n-      @media screen and (max-width: 575px) {\r\n-        width: 100%;\r\n-      }\r\n-      .card-form {\r\n-        width: 80%;\r\n-        @media screen and (max-width: 575px) {\r\n-          width: 100%;\r\n-        }\r\n-      }\r\n-      .loginbtn {\r\n-        width: 100%;\r\n-        margin-bottom: 10px;\r\n-        font-size: 1.2rem;\r\n-        margin-top: 20px;\r\n-      }\r\n-    }\r\n-  }\r\n-  .login-form {\r\n-    // position: relative;\r\n-    // width: 520px;\r\n-    width: 100%;\r\n-    padding: 0 30px 30px 30px;\r\n-    margin: 0 auto;\r\n-    overflow: hidden;\r\n-  }\r\n-\r\n-  .tips {\r\n-    font-size: 1rem;\r\n-    color: red;\r\n-    margin-top: 5px;\r\n-    span {\r\n-      &:first-of-type {\r\n-        margin-right: 16px;\r\n-      }\r\n-    }\r\n-  }\r\n-\r\n-  .svg-container {\r\n-    padding: 6px 5px 6px 15px;\r\n-    color: $dark_gray;\r\n-    vertical-align: middle;\r\n-    width: 30px;\r\n-    display: inline-block;\r\n-  }\r\n-\r\n-  .title-container {\r\n-    position: relative;\r\n-\r\n-    .title {\r\n-      font-size: 26px;\r\n-      color: $mainclr;\r\n-      // margin-top: 20px;\r\n-      text-align: center;\r\n-      font-weight: bold;\r\n-    }\r\n-  }\r\n-\r\n-  .show-pwd {\r\n-    position: absolute;\r\n-    right: 10px;\r\n-    top: 7px;\r\n-    font-size: 16px;\r\n-    color: $dark_gray;\r\n-    cursor: pointer;\r\n-    user-select: none;\r\n-  }\r\n-}\r\n-</style>\r\n-\r\n-<style lang=\"scss\" scoped>\r\n-/* something not from the original code */\r\n-.login-logo {\r\n-  text-align: center;\r\n-  svg {\r\n-    width: 100%;\r\n-    height: auto;\r\n-  }\r\n-  img {\r\n-    width: 60%;\r\n-    max-width: 300px;\r\n-    margin-bottom: 2rem;\r\n-  }\r\n-}\r\n-</style>\r\n"
                },
                {
                    "date": 1637633192710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,9 +167,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.password);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              // this.$router.push({ path: this.redirect || \"/\" });\r\n+              this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n               const strError = error + \"\";\r\n"
                },
                {
                    "date": 1637633373185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,9 +167,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.password);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              this.$router.push({ path: this.redirect || \"/\" });\r\n+              // this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n               const strError = error + \"\";\r\n"
                },
                {
                    "date": 1637633460710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,9 +167,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.password);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              // this.$router.push({ path: this.redirect || \"/\" });\r\n+              this.$router.push({ path: \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n               const strError = error + \"\";\r\n"
                },
                {
                    "date": 1637633556086,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,9 +167,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.password);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              this.$router.push({ path: \"/\" });\r\n+              this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n               const strError = error + \"\";\r\n"
                },
                {
                    "date": 1637634179107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -160,9 +160,8 @@\n     handleLogin() {\r\n       this.loginErr = \"\";\r\n       this.$refs.loginForm.validate((valid) => {\r\n         if (valid) {\r\n-          console.log(\"qq\", valid);\r\n           this.loading = true;\r\n           // 20210305 密码改为MD5\r\n           this.loginForm.secret = this.$md5(this.loginForm.password);\r\n           this.$store\r\n"
                },
                {
                    "date": 1637731851477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,28 +44,28 @@\n                 maxlength=\"32\"\r\n                 @keypress.native.enter=\"onEnterPress\"\r\n               />\r\n             </el-form-item>\r\n-            <el-form-item prop=\"password\">\r\n+            <el-form-item prop=\"pwdaes\">\r\n               <span class=\"svg-container\">\r\n                 <svg-icon icon-class=\"password\" />\r\n               </span>\r\n               <el-input\r\n                 :key=\"passwordType\"\r\n-                ref=\"password\"\r\n-                v-model=\"loginForm.password\"\r\n+                ref=\"pwdaes\"\r\n+                v-model=\"loginForm.pwdaes\"\r\n                 v-input-filter:pwd\r\n                 :type=\"passwordType\"\r\n                 :placeholder=\"$t('Login.Password')\"\r\n-                name=\"password\"\r\n+                name=\"pwdaes\"\r\n                 tabindex=\"2\"\r\n                 auto-complete=\"on\"\r\n                 maxlength=\"64\"\r\n                 @keyup.enter.native=\"handleLogin\"\r\n               />\r\n               <span class=\"show-pwd\" @click=\"showPwd\">\r\n                 <svg-icon\r\n-                  :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\r\n+                  :icon-class=\"passwordType === 'pwdaes' ? 'eye' : 'eye-open'\"\r\n                 />\r\n               </span>\r\n             </el-form-item>\r\n             <el-button\r\n@@ -105,9 +105,9 @@\n     };\r\n     return {\r\n       loginForm: {\r\n         username: this.name,\r\n-        password: \"\",\r\n+        pwdaes: \"\",\r\n         vefcode_img: \"\",\r\n       },\r\n       loginRules: {\r\n         username: [\r\n@@ -115,9 +115,9 @@\n         ],\r\n         // password: [{ required: true, trigger: 'blur', validator: validatePassword }]\r\n       },\r\n       loading: false,\r\n-      passwordType: \"password\",\r\n+      passwordType: \"pwdaes\",\r\n       redirect: undefined,\r\n       leftImg: require(\"@/assets/basic/homebus_left.png\"),\r\n       loginErr: \"\",\r\n       errortip: \"\",\r\n@@ -147,24 +147,24 @@\n     onEnterPress() {\r\n       this.handleLogin();\r\n     },\r\n     showPwd() {\r\n-      if (this.passwordType === \"password\") {\r\n+      if (this.passwordType === \"pwdaes\") {\r\n         this.passwordType = \"\";\r\n       } else {\r\n-        this.passwordType = \"password\";\r\n+        this.passwordType = \"pwdaes\";\r\n       }\r\n       this.$nextTick(() => {\r\n-        this.$refs.password.focus();\r\n+        this.$refs.pwdaes.focus();\r\n       });\r\n     },\r\n     handleLogin() {\r\n       this.loginErr = \"\";\r\n       this.$refs.loginForm.validate((valid) => {\r\n         if (valid) {\r\n           this.loading = true;\r\n           // 20210305 密码改为MD5\r\n-          this.loginForm.secret = this.$md5(this.loginForm.password);\r\n+          this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n"
                },
                {
                    "date": 1637732249890,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,9 +150,9 @@\n     showPwd() {\r\n       if (this.passwordType === \"pwdaes\") {\r\n         this.passwordType = \"\";\r\n       } else {\r\n-        this.passwordType = \"pwdaes\";\r\n+        this.passwordType = \"password\";\r\n       }\r\n       this.$nextTick(() => {\r\n         this.$refs.pwdaes.focus();\r\n       });\r\n"
                },
                {
                    "date": 1637732312700,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -147,9 +147,9 @@\n     onEnterPress() {\r\n       this.handleLogin();\r\n     },\r\n     showPwd() {\r\n-      if (this.passwordType === \"pwdaes\") {\r\n+      if (this.passwordType === \"password\") {\r\n         this.passwordType = \"\";\r\n       } else {\r\n         this.passwordType = \"password\";\r\n       }\r\n"
                },
                {
                    "date": 1637732412675,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,9 @@\n                 @keyup.enter.native=\"handleLogin\"\r\n               />\r\n               <span class=\"show-pwd\" @click=\"showPwd\">\r\n                 <svg-icon\r\n-                  :icon-class=\"passwordType === 'pwdaes' ? 'eye' : 'eye-open'\"\r\n+                  :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\r\n                 />\r\n               </span>\r\n             </el-form-item>\r\n             <el-button\r\n"
                },
                {
                    "date": 1637732462657,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,9 +115,9 @@\n         ],\r\n         // password: [{ required: true, trigger: 'blur', validator: validatePassword }]\r\n       },\r\n       loading: false,\r\n-      passwordType: \"pwdaes\",\r\n+      passwordType: \"password\",\r\n       redirect: undefined,\r\n       leftImg: require(\"@/assets/basic/homebus_left.png\"),\r\n       loginErr: \"\",\r\n       errortip: \"\",\r\n"
                },
                {
                    "date": 1638355104795,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,8 +166,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n+              console.log(\"zaza\", response);\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n"
                },
                {
                    "date": 1638355313894,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,9 +165,9 @@\n           // 20210305 密码改为MD5\r\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n-            .then(() => {\r\n+            .then((response) => {\r\n               console.log(\"zaza\", response);\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n"
                },
                {
                    "date": 1638355360305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,10 +165,9 @@\n           // 20210305 密码改为MD5\r\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n-            .then((response) => {\r\n-              console.log(\"zaza\", response);\r\n+            .then(() => {\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n"
                },
                {
                    "date": 1638356274268,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,8 +166,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n+              console.log(\"qq\", this.loginForm);\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n"
                },
                {
                    "date": 1638357981665,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,9 +166,8 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              console.log(\"qq\", this.loginForm);\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n"
                },
                {
                    "date": 1638358376200,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,8 +166,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n+              console.log(\"qqq\", this.loginForm);\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n"
                },
                {
                    "date": 1638358836094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,8 +166,12 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n+              //add\r\n+              let loginFormDe = this.loginForm;\r\n+              this.$store.commit(\"formInfo\", loginFormDe);\r\n+              //end\r\n               console.log(\"qqq\", this.loginForm);\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n"
                },
                {
                    "date": 1638360375142,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,12 +166,8 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              //add\r\n-              let loginFormDe = this.loginForm;\r\n-              this.$store.commit(\"formInfo\", loginFormDe);\r\n-              //end\r\n               console.log(\"qqq\", this.loginForm);\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n"
                },
                {
                    "date": 1638494660087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,9 +166,8 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              console.log(\"qqq\", this.loginForm);\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n"
                },
                {
                    "date": 1638496452890,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,9 +166,10 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              this.$router.push({ path: this.redirect || \"/\" });\r\n+              // this.$router.push({ path: this.redirect || \"/\" });\r\n+              this.$router.push({ path: this.redirect || \"/login\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n               const strError = error + \"\";\r\n"
                },
                {
                    "date": 1638496518748,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,10 +166,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              // this.$router.push({ path: this.redirect || \"/\" });\r\n-              this.$router.push({ path: this.redirect || \"/login\" });\r\n+              this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n               const strError = error + \"\";\r\n"
                },
                {
                    "date": 1638496983970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,8 +170,9 @@\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n+              console.log(\"222\");\r\n               const strError = error + \"\";\r\n               console.log(strError);\r\n               if (strError === \"Error: 22\" || strError === \"Error: 21\") {\r\n                 this.loginErr = i18n.t(\"Error.ErrorPassword\");\r\n"
                },
                {
                    "date": 1638496994559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n-              console.log(\"222\");\r\n+              console.log(\"aaa\");\r\n               const strError = error + \"\";\r\n               console.log(strError);\r\n               if (strError === \"Error: 22\" || strError === \"Error: 21\") {\r\n                 this.loginErr = i18n.t(\"Error.ErrorPassword\");\r\n"
                },
                {
                    "date": 1638497009915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,8 @@\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n-              console.log(\"aaa\");\r\n               const strError = error + \"\";\r\n               console.log(strError);\r\n               if (strError === \"Error: 22\" || strError === \"Error: 21\") {\r\n                 this.loginErr = i18n.t(\"Error.ErrorPassword\");\r\n"
                },
                {
                    "date": 1638497022997,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,8 +166,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n+              console.log(\"222\");\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n"
                },
                {
                    "date": 1638497030029,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,9 +166,9 @@\n           this.loginForm.secret = this.$md5(this.loginForm.pwdaes);\r\n           this.$store\r\n             .dispatch(\"user/login\", this.loginForm)\r\n             .then(() => {\r\n-              console.log(\"222\");\r\n+              console.log(\"aaa\");\r\n               this.$router.push({ path: this.redirect || \"/\" });\r\n               this.loading = false;\r\n             })\r\n             .catch((error) => {\r\n"
                }
            ],
            "date": 1637572241242,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"login-container\" align=\"center\">\r\n    <div class=\"login-card\">\r\n      <div\r\n        class=\"card-left\"\r\n        :style=\"{ backgroundImage: 'url(' + leftImg + ')' }\"\r\n      ></div>\r\n      <div class=\"card-right\">\r\n        <div v-if=\"ShowLanguage\" class=\"langicon-div\">\r\n          <lang-select class=\"right-menu-item hover-effect langicon\" />\r\n        </div>\r\n        <div align=\"center\" class=\"card-form\">\r\n          <el-form\r\n            ref=\"loginForm\"\r\n            :model=\"loginForm\"\r\n            :rules=\"loginRules\"\r\n            class=\"login-form\"\r\n            auto-complete=\"on\"\r\n            label-position=\"left\"\r\n          >\r\n            <div class=\"title-container\">\r\n              <div class=\"title\">\r\n                <h3>{{ $t(\"Login.Title\") }}</h3>\r\n              </div>\r\n              <div class=\"login-logo logo-div\">\r\n                <!-- <img src=\"@/assets/basic/logo_NYU_white.png\" alt=\"logo\"> -->\r\n                <div style=\"height: 40px\" />\r\n              </div>\r\n            </div>\r\n\r\n            <el-form-item prop=\"username\">\r\n              <span class=\"svg-container\">\r\n                <svg-icon icon-class=\"user\" />\r\n              </span>\r\n              <el-input\r\n                ref=\"username\"\r\n                v-model=\"loginForm.username\"\r\n                v-input-filter:common\r\n                :placeholder=\"$t('Login.UserName')\"\r\n                name=\"username\"\r\n                type=\"text\"\r\n                tabindex=\"1\"\r\n                auto-complete=\"on\"\r\n                maxlength=\"32\"\r\n                @keypress.native.enter=\"onEnterPress\"\r\n              />\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\">\r\n              <span class=\"svg-container\">\r\n                <svg-icon icon-class=\"password\" />\r\n              </span>\r\n              <el-input\r\n                :key=\"passwordType\"\r\n                ref=\"password\"\r\n                v-model=\"loginForm.password\"\r\n                v-input-filter:pwd\r\n                :type=\"passwordType\"\r\n                :placeholder=\"$t('Login.Password')\"\r\n                name=\"password\"\r\n                tabindex=\"2\"\r\n                auto-complete=\"on\"\r\n                maxlength=\"64\"\r\n                @keyup.enter.native=\"handleLogin\"\r\n              />\r\n              <span class=\"show-pwd\" @click=\"showPwd\">\r\n                <svg-icon\r\n                  :icon-class=\"passwordType === 'password' ? 'eye' : 'eye-open'\"\r\n                />\r\n              </span>\r\n            </el-form-item>\r\n            <el-button\r\n              :loading=\"loading\"\r\n              type=\"primary\"\r\n              round\r\n              class=\"loginbtn\"\r\n              @click.native.prevent=\"handleLogin\"\r\n              >{{ $t(\"Login.Login\") }}</el-button\r\n            >\r\n            <div class=\"tips\">\r\n              <span>{{ loginErr }}</span>\r\n            </div>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport i18n from \"@/languages\";\r\nimport { mapGetters } from \"vuex\";\r\nimport LangSelect from \"@/components/LanguageSelect\";\r\nexport default {\r\n  components: {\r\n    LangSelect,\r\n  },\r\n  // name: 'Login',\r\n  data() {\r\n    const validateUsername = (rule, value, callback) => {\r\n      if (!value) {\r\n        callback(new Error(this.$t(\"EmptyTip\")));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      loginForm: {\r\n        username: this.name,\r\n        password: \"\",\r\n        vefcode_img: \"\",\r\n      },\r\n      loginRules: {\r\n        username: [\r\n          { required: true, trigger: \"blur\", validator: validateUsername },\r\n        ],\r\n        // password: [{ required: true, trigger: 'blur', validator: validatePassword }]\r\n      },\r\n      loading: false,\r\n      passwordType: \"password\",\r\n      redirect: undefined,\r\n      leftImg: require(\"@/assets/basic/homebus_left.png\"),\r\n      loginErr: \"\",\r\n      errortip: \"\",\r\n      showtip: false,\r\n      // eslint-disable-next-line\r\n      ShowLanguage: true, // 是否展现语言切换\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"name\"]),\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler: function (route) {\r\n        this.redirect = route.query && route.query.redirect;\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n  mounted: function () {\r\n    // this.changeValidImg()\r\n  },\r\n  // beforeMount() {\r\n  //   store.dispatch('app/checkNavigator', navigator)\r\n  // },\r\n  methods: {\r\n    onEnterPress() {\r\n      this.handleLogin();\r\n    },\r\n    showPwd() {\r\n      if (this.passwordType === \"password\") {\r\n        this.passwordType = \"\";\r\n      } else {\r\n        this.passwordType = \"password\";\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.password.focus();\r\n      });\r\n    },\r\n    handleLogin() {\r\n      this.loginErr = \"\";\r\n      this.$refs.loginForm.validate((valid) => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          // 20210305 密码改为MD5\r\n          this.loginForm.secret = this.$md5(this.loginForm.password);\r\n          this.$store\r\n            .dispatch(\"user/login\", this.loginForm)\r\n            .then(() => {\r\n              this.$router.push({ path: this.redirect || \"/\" });\r\n              this.loading = false;\r\n            })\r\n            .catch((error) => {\r\n              const strError = error + \"\";\r\n              console.log(strError);\r\n              if (strError === \"Error: 22\" || strError === \"Error: 21\") {\r\n                this.loginErr = i18n.t(\"Error.ErrorPassword\");\r\n              } else if (strError === \"Error: 101\") {\r\n                this.loginErr = i18n.t(\"Error.VaildCodeError\");\r\n              } else if (strError === \"Error: 142\") {\r\n                this.loginErr = i18n.t(\"Error.PwdExpired\");\r\n              }\r\n              // this.changeValidImg()\r\n              this.loading = false;\r\n            });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    /**\r\n    更改验证码图片\r\n     */\r\n    changeValidImg() {\r\n      var src = \"\";\r\n      if (process.env.NODE_ENV === \"development\") {\r\n        src =\r\n          process.env.VUE_APP_BASE_API +\r\n          \"/vefcode/getimg/?random=\" +\r\n          Math.random();\r\n      } else if (process.env.NODE_ENV === \"production\") {\r\n        src =\r\n          process.env.VUE_APP_BASE_API +\r\n          \"vefcode/getimg/?random=\" +\r\n          Math.random();\r\n      }\r\n      document.getElementById(\"validimg\").src = src;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n$bg: #fff;\r\n$light_gray: #fff;\r\n$cursor: rgb(15, 99, 73);\r\n$spanclr: #606266;\r\n$mainclr: rgb(15, 99, 73);\r\n@supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\r\n  .login-container .el-input input {\r\n    color: $cursor;\r\n  }\r\n}\r\n.codeimg {\r\n  line-height: 47px;\r\n  width: 100%;\r\n  height: 47px;\r\n  padding: 2px 0 2px 10px;\r\n}\r\n.logo-div {\r\n  margin: 30px;\r\n}\r\n.langicon-div {\r\n  top: 1rem;\r\n  right: 1rem;\r\n  float: right;\r\n}\r\n.langicon {\r\n  width: 50px;\r\n  height: 50px;\r\n  margin: 20px;\r\n  color: rgb(15, 99, 73);\r\n  font-size: 2rem;\r\n}\r\n/* reset element-ui css */\r\n.login-container {\r\n  .el-input {\r\n    display: inline-block;\r\n    height: 47px;\r\n    width: 85%;\r\n\r\n    input {\r\n      background: transparent;\r\n      border: 0px;\r\n      -webkit-appearance: none;\r\n      border-radius: 0px;\r\n      padding: 12px 5px 12px 15px;\r\n      color: $spanclr;\r\n      height: 47px;\r\n      caret-color: $cursor;\r\n\r\n      &:-webkit-autofill {\r\n        box-shadow: 0 0 0px 1000px $bg inset !important;\r\n        -webkit-text-fill-color: $cursor !important;\r\n      }\r\n    }\r\n  }\r\n\r\n  .el-form-item {\r\n    //border: 1px solid rgba(255, 255, 255, 0.1);\r\n    // background: rgba(0, 0, 0, 0.1);\r\n    border-radius: 5px;\r\n    color: #454545;\r\n    border: 1px solid #c4cbdc;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n$bg: #2d3a4b;\r\n$dark_gray: #889aa4;\r\n$light_gray: #eee;\r\n$bkclr: #f4f5f9;\r\n$spanclr: #606266;\r\n$mainclr: rgb(15, 99, 73);\r\n.login-container {\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: $bkclr;\r\n  overflow: hidden;\r\n  .login-card {\r\n    @media screen and (max-width: 575px) {\r\n    }\r\n    @media screen and (min-width: 576px) {\r\n      margin-top: 10rem;\r\n    }\r\n    @media screen and (max-height: 900px) {\r\n      margin-top: 0;\r\n    }\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    display: table;\r\n    border-radius: 4px;\r\n    border: 1px solid #ebeef5;\r\n    background-color: #fff;\r\n    color: $spanclr;\r\n    -webkit-transition: 0.3s;\r\n    transition: 0.3s;\r\n    box-shadow: 0 4px 24px 0 rgba(0, 0, 0, 0.2);\r\n    width: 100%;\r\n    max-width: 1000px;\r\n    position: relative;\r\n    .card-left {\r\n      background-color: rgba(255, 255, 255, 1);\r\n      background-size: 100% 100%;\r\n      height: 100%;\r\n      width: 50%;\r\n      float: left;\r\n      position: relative;\r\n      opacity: 0.9;\r\n      // width: calc(100% - 250px);\r\n      min-height: 650px;\r\n      @media screen and (max-width: 575px) {\r\n        display: none;\r\n      }\r\n      .title {\r\n        background-color: rgba(255, 255, 255, 0.7);\r\n        top: 0;\r\n        padding: 40px;\r\n        span {\r\n          color: rgba(15, 99, 73.9);\r\n          padding: 30px;\r\n          font-size: 2rem;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n    .card-right {\r\n      background-color: white;\r\n      width: 50%;\r\n      float: left;\r\n      @media screen and (max-width: 575px) {\r\n        width: 100%;\r\n      }\r\n      .card-form {\r\n        width: 80%;\r\n        @media screen and (max-width: 575px) {\r\n          width: 100%;\r\n        }\r\n      }\r\n      .loginbtn {\r\n        width: 100%;\r\n        margin-bottom: 10px;\r\n        font-size: 1.2rem;\r\n        margin-top: 20px;\r\n      }\r\n    }\r\n  }\r\n  .login-form {\r\n    // position: relative;\r\n    // width: 520px;\r\n    width: 100%;\r\n    padding: 0 30px 30px 30px;\r\n    margin: 0 auto;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .tips {\r\n    font-size: 1rem;\r\n    color: red;\r\n    margin-top: 5px;\r\n    span {\r\n      &:first-of-type {\r\n        margin-right: 16px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .svg-container {\r\n    padding: 6px 5px 6px 15px;\r\n    color: $dark_gray;\r\n    vertical-align: middle;\r\n    width: 30px;\r\n    display: inline-block;\r\n  }\r\n\r\n  .title-container {\r\n    position: relative;\r\n\r\n    .title {\r\n      font-size: 26px;\r\n      color: $mainclr;\r\n      // margin-top: 20px;\r\n      text-align: center;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n\r\n  .show-pwd {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 7px;\r\n    font-size: 16px;\r\n    color: $dark_gray;\r\n    cursor: pointer;\r\n    user-select: none;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n/* something not from the original code */\r\n.login-logo {\r\n  text-align: center;\r\n  svg {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n  img {\r\n    width: 60%;\r\n    max-width: 300px;\r\n    margin-bottom: 2rem;\r\n  }\r\n}\r\n</style>\r\n"
        }
    ]
}