/*
 * @Descripttion: 
 * @version: 
 * @Author: Bing
 * @Date: 2020-12-03 11:24:19
 * @LastEditors: sueRimn
 * @LastEditTime: 2021-02-23 17:58:42
 */
tinymce.PluginManager.add('qrcode', function(editor) {
    var AddQRcode = function () {
        editor.insertContent('<div><img src="/static/system/@QRCODE@.jpg" width="200" height="200"></div>')
    };
    
    editor.ui.registry.addIcon(
        'add-qrcode',
        '<svg t="1606967470469" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3376" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M499.057025 674.840682 499.057025 674.840682 499.057025 674.840682 499.057025 674.840682zM699.522634 474.375073 699.522634 474.375073C700.124633 473.773075 700.124633 473.773075 699.522634 474.375073 700.124633 474.375073 699.522634 474.375073 699.522634 474.375073zM887.346267 0 136.653733 0C60.801881 0 0 60.801881 0 136.653733l0 750.692534c0 75.249853 61.40388 136.653733 136.653733 136.653733l750.692534 0c75.249853 0 136.653733-61.40388 136.653733-136.653733L1024 136.653733C1024 60.801881 962.59612 0 887.346267 0zM305.815403 137.255732c56.587889 0 101.737801 45.751911 101.737801 101.737801 0 56.587889-45.751911 101.737801-101.737801 101.737801-56.587889 0-101.737801-45.751911-101.737801-101.737801C204.077601 183.007643 249.829512 137.255732 305.815403 137.255732zM775.374486 632.098765c-7.825985 7.825985-19.263962 9.029982-28.895944 4.815991-0.601999 0.601999-25.283951-22.875955-25.283951-22.875955l-36.119929 36.119929-75.851852 75.851852c-0.601999 0.601999-0.601999 1.805996-1.805996 2.407995-10.23398 9.631981-25.885949 9.631981-36.119929 0-9.631981-10.23398-9.631981-25.885949 0-36.119929 0 0 0.601999 0 0.601999-0.601999l126.419753-125.215755c16.253968-10.835979 39.129924-9.631981 53.577895 5.417989 1.805996 1.805996 5.417989 5.417989 5.417989 5.417989l18.059965 18.059965C785.608466 606.212816 785.608466 622.466784 775.374486 632.098765zM847.614345 704.338624c-10.23398 9.631981-25.885949 9.631981-36.119929 0l-11.437978-11.437978c0 0-0.601999 0-0.601999-0.601999-9.631981-10.23398-9.631981-25.885949 0-36.119929 10.23398-9.631981 25.885949-9.631981 36.119929 0 0 0 0 0.601999 0.601999 0.601999l0 0 11.437978 11.437978C857.848325 678.452675 857.848325 694.104644 847.614345 704.338624zM955.974133 672.432687c-3.009994 17.457966-16.855967 18.059965-28.293945 6.019988l-184.21164-182.405644c-7.223986-7.223986-19.263962-7.825985-26.487948-0.601999 0 0-198.057613 186.619636-258.859494 253.441505-1.805996 2.407995-6.621987 9.029982-27.089947 0.601999-46.955908-19.263962-160.131687-124.613757-160.131687-124.613757-7.223986-5.417989-17.457966-5.417989-24.079953 1.203998l-146.887713 137.857731c-12.039976 10.835979-31.303939 3.009994-31.303939-13.845973l0-49.965902 169.763668-160.131687c18.661964-12.039976 24.079953-8.427984 29.497942-3.611993 33.711934 26.487948 121.001764 96.319812 153.5097 122.205761 7.223986 5.417989 17.457966 5.417989 24.079953-0.601999l273.909465-246.217519c9.029982-7.825985 22.273956-7.825985 30.70194 0.601999 0 0 141.469724 175.783657 183.609641 175.783657 7.223986 0 16.253968-19.263962 22.875955-16.855967C979.452087 579.724868 955.974133 672.432687 955.974133 672.432687z" p-id="3377"></path></svg>'
 
    );
      // 注册一个自定义的按钮
      editor.ui.registry.addButton("qrcode", {
        icon: 'add-qrcode',
        onAction: function() {
            AddQRcode();
        }
      });
  
  
    return {
      getMetadata: function () {
        return  {
          //插件名和链接会显示在“帮助”→“插件”→“已安装的插件”中
          name: "qrcode plugin",//插件名称
        };
      }
    };
  });